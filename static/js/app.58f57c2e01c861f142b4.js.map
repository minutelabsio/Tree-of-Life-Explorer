{"version":3,"sources":["webpack:///./src/lib/pubsub.js","webpack:///src/components/collage.vue","webpack:///./src/components/collage.vue?4b64","webpack:///./src/components/collage.vue","webpack:///src/components/tol-leaf-view/leaf-view-menu.vue","webpack:///./src/components/tol-leaf-view/leaf-view-menu.vue?84a2","webpack:///./src/components/tol-leaf-view/leaf-view-menu.vue","webpack:///./src/lib/cacher.js","webpack:///./src/lib/otol.js","webpack:///./src/lib/gbif.js","webpack:///./src/lib/throttler.js","webpack:///./src/lib/wikidata.js","webpack:///./src/lib/wikimedia.js","webpack:///./src/lib/image-blacklist.js","webpack:///./src/lib/image-overrides.js","webpack:///./src/lib/taxonomy.js","webpack:///./src/lib/utils.js","webpack:///src/components/taxonomy-info-window.vue","webpack:///./src/components/taxonomy-info-window.vue?ff08","webpack:///./src/components/taxonomy-info-window.vue","webpack:///src/components/tol-leaf-view/index.vue","webpack:///./src/components/tol-leaf-view/index.vue?b12f","webpack:///./src/components/tol-leaf-view/index.vue","webpack:///src/components/tol-mrca-view/index.vue","webpack:///./src/components/tol-mrca-view/index.vue?6ae9","webpack:///./src/components/tol-mrca-view/index.vue","webpack:///./src/components/tree/node.vue","webpack:///src/components/tree/node.vue","webpack:///src/components/tree/ancestor-collapse.vue","webpack:///./src/components/tree/ancestor-collapse.vue","webpack:///src/components/tree/condensed-node.vue","webpack:///./src/components/tree/condensed-node.vue","webpack:///./src/components/tree/tail.vue","webpack:///src/components/tree/tail.vue","webpack:///./src/components/tree/connection.vue","webpack:///src/components/tree/connection.vue","webpack:///src/components/tree/child-menu.vue","webpack:///./src/components/tree/child-menu.vue?4218","webpack:///./src/components/tree/child-menu.vue","webpack:///src/components/tree/tree-display.vue","webpack:///./src/components/tree/tree-display.vue?be86","webpack:///./src/components/tree/tree-display.vue","webpack:///src/components/tree/tree-canvas.vue","webpack:///./src/components/tree/tree-canvas.vue?88f4","webpack:///./src/components/tree/tree-canvas.vue","webpack:///./src/lib/tree-utils.js","webpack:///src/components/tol-tree.vue","webpack:///./src/components/tol-tree.vue?1e5e","webpack:///./src/components/tol-tree.vue","webpack:///src/components/tol-common-name-search.vue","webpack:///./src/components/tol-common-name-search.vue?04bb","webpack:///./src/components/tol-common-name-search.vue","webpack:///src/components/tol-suggested-trees.vue","webpack:///./src/components/tol-suggested-trees.vue?1ec9","webpack:///./src/components/tol-suggested-trees.vue","webpack:///./src/lib/fullscreen.js","webpack:///src/pages/tol.vue","webpack:///./src/pages/tol.vue?ce39","webpack:///./src/pages/tol.vue","webpack:///./src/router/index.js","webpack:///src/app.vue","webpack:///./src/app.vue?1d3a","webpack:///./src/app.vue","webpack:///./src/plugins/filters.js","webpack:///./src/main.js"],"names":["pubsub","Vue","collage","name","props","images","Array","data","computed","useCollage","this","length","components","methods","components_collage","render","_h","$createElement","_c","_self","staticClass","_e","attrs","src","_l","image","staticRenderFns","src_components_collage","__webpack_require__","normalizeComponent","ssrContext","leaf_view_menu","commonName","String","flapStyle","Boolean","scientificName","shortScientificName","truncateLength","type","Number","default","backgroundStyle","Collage","tol_leaf_view_leaf_view_menu","_vm","label","_f","active","_v","_s","_t","class","darken","components_tol_leaf_view_leaf_view_menu","leaf_view_menu_normalizeComponent","isExpired","entry","expires","Date","now","cacher","fn","lifetime","arguments","undefined","cache","window","setInterval","keys","keys_default","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","k","value","err","return","clean","_len","args","_key","key","stringify_default","getKey","cachedResult","getCached","Promise","resolve","result","then","cacheResult","otol","axios","create","baseURL","timeout","crossdomain","getNode","id","_data","_startsWith","idOrArray","match","node_ids","post","res","mrca","all","map","taxon","getDescendantNames","node_id","childrenNames","join","spread","nodes","lineage","lineages","n","concat","forEach","l","reverse","longest","_sortBy","pop","common","_takeWhile","p","idx","_every","getCommonLineage","getMRCA","idField","defineProperty_default","tap","response_for_mrca_of_broken_taxon","console","error","getTxResultsByNames","names","_castArray","results","getNodeByName","_find","Error","matches","ott_id","getSubtree","source","source_id","_data2","depth","arguson","children","_data3","descendant_name_list","getTxnSourceId","node","str","tax_sources","x","replace","langs","setupCache","maxAge","req","url","params","exclude","query","gbif","adapter","paramsSerializer","options","isParamTypeObject","typeof_default","isParamTypeArray","element","slice","parseParams","setVernacularNames","vernacularNames","vernacularName","push","language","vernacularNameList","filter","indexOf","_flow","_startCase","_uniq","extends_default","findByScientificName","q","qField","status","dataset_key","d","Throttler","delay","batchSize","classCallCheck_default","count","arg","_this","Math","floor","wikidata","headers","Accept","throttler","findInfoBy","_ref4","ncbiId","_ref5","limit","lang","_ref","sparqlQuery","encodeURIComponent","findInfoByNcbiId","_ref2","findInfoByScientificName","interceptors","request","use","config","schedule","response","fromCache","_response$data","vars","head","bindings","item","assign_default","itemId","m","getItemId","_mapValues","_pick","singleProps","items","_groupBy","_values","parts","_transform","part","_omit","assembleByItem","dir","reject","wikimedia","mapImageResults","page","imageinfo","val","pageid","findImagesByName","thumbSize","action","prop","generator","gsrsearch","format","origin","iiprop","iiurlwidth","_get","r","title","image_blacklist","image_overrides","ott335582","pic","thumbnail","ott517942","ott568878","ott1007058","ott352914","ott698424","ott186816","ott417957","ott541924","ott770309","ott770315","ott563166","ott763018","ott532127","ott78477","ott1005907","ott244265","ott802117","ott510761","ott510762","ott490099","ott312031","ott417969","gbifMapping","nubKey","nameKey","taxonID","sourceTaxonKey","kingdom","phylum","kingdomKey","phylumKey","datasetKey","constituentKey","parentKey","parent","canonicalName","authorship","nameType","rank","taxonomicStatus","nomenclaturalStatus","remarks","numDescendants","lastCrawled","lastInterpreted","issues","synonym","getMapping","mapping","reduce","obj","toLowerCase","getTaxonomyInfo","types","queries","txnInfoQueries","resultList","_union","txn","unique_name","ensureVernacularNames","toHTTPS","applyImageOverrides","leaf","override","imageOverrides","getImagesAndCommonNames","firstResult","first","second","_reject","_indexOf","imageBlacklist","thumbnails","getAllImages","isMRCA","getTxnInfo","coroutine","regenerator_default","a","mark","_callee","wrap","_context","prev","getLeaf","sent","split","abrupt","_mergeWith","toConsumableArray_default","objValue","srcValue","_isArray","txnInfo","imgNameData","stop","Leaf","copyToClipboard","el","document","createElement","setAttribute","style","position","left","body","appendChild","select","execCommand","removeChild","taxonomy_info_window","Object","currentPic","swiperOptions","navigation","nextEl","prevEl","pagination","isTouch","documentElement","otherCommonNames","taxonomy_isMRCA","rankLink","links","gbifId","remove_default","text","nextImage","len","prevImage","$toast","open","message","utils_copyToClipboard","components_taxonomy_info_window","on","click","$event","href","target","img","slot","icon","link","src_components_taxonomy_info_window","taxonomy_info_window_normalizeComponent","shortName","words","out","i","word","tol_leaf_view","LeafViewMenu","filters","txnImages","pin","expanded","loading","hovering","watch","handler","info","nImages","_nImages","catch","$emit","immediate","isAddedToTree","childIsAdded","child","$route","ids","_this2","otol_getSubtree","e","openInfoWindow","$modal","component","hasModalCard","show","hide","startTimer","_this3","timer","setTimeout","clearTimer","clearTimeout","onTouch","preventDefault","stopImmediatePropagation","onMouseLeave","onMouseEnter","_this4","components_tol_leaf_view","flap-style","horizontal","vertical","data-ott","mousedown","stopPropagation","mouseleave","mouseenter","!touchstart","size","mobile-modal","active-change","nativeOn","wheel","is-full-page","has-text-grey-light","common-name","scientific-name","short-scientific-name","truncate-length","hideImages","touchstart","src_components_tol_leaf_view","tol_leaf_view_normalizeComponent","tol_mrca_view","leafData","finally","components_tol_mrca_view","src_components_tol_mrca_view","tol_mrca_view_normalizeComponent","components_tree_node","node_normalizeComponent","inject","mixins","beforeDestroy","off","remove","beforeMount","scene","svg","group","addClass","move","rect","center","radius","plain","tree","attr","subtree","y","h","front","ancestor_collapse","dots","drawDots","clear","circle","width","removeClass","tree_ancestor_collapse","ancestor_collapse_normalizeComponent","condensed_node","tree_condensed_node","condensed_node_normalizeComponent","tree_tail","tail_normalizeComponent","tail","tree_connection","connection_normalizeComponent","polyline","plot","spacing","padding","x1","y1","x2","y2","line","back","child_menu","tree_child_menu","is-active","transform","components_tree_child_menu","child_menu_normalizeComponent","getColumns","columns","fill","appendToColumns","colOffset","level","colIndex","nTips","isRoot","hasSplit","tree_display","px","py","cardWidth","cardHeight","branchSpacing","hide-images","computedBranches","compactView","transitions","subtreeLeaf","childMenuX","childMenuY","Connection","ChildMenu","Node","AncestorCollapse","CondensedNode","Tail","TOLLeafView","TOLMRCAView","created","addEventListener","onDocumentClick","destroyed","removeEventListener","branches","b","getBranches","opts","hz","height","nodeContainerSize","colstart","dx","dy","flatten_default","xpos","ypos","col","openChildMenu","tree_tree_display","branch","top","tabindex","css","cut","add-node","remove-node","components_tree_tree_display","tree_display_normalizeComponent","clamp","v","min","max","requestAnimationFrame","animate","time","Tween_default","update","tree_canvas","offsetX","offsetY","panDuration","elWidth","elHeight","provide","svgEl","svg_default","mounted","$refs","impetus","impetus_default","$el","cancelPan","setOffset","onResize","debounce_default","setBoundX","xBounds","setBoundY","yBounds","onWheel","contains","_getClampedCoords","getClampedCoords","deltaX","deltaY","setValues","passive","$watch","$once","destroy","fixSVGPosition","_xBounds","slicedToArray_default","minX","maxX","_yBounds","minY","maxY","offsetWidth","offsetHeight","panTo","coords","_getClampedCoords2","_activeTween","Tween","to","easing","Easing","Quadratic","InOut","onUpdate","start","tree_tree_canvas","ref","components_tree_tree_canvas","tree_canvas_normalizeComponent","toBranch","splitAt","_clone","mergeAt","splice","shift","joinTree","treeParent","branchParent","stem","isInStem","tipsAdded","treeSort","sort","buildReducedTree","leafs","assignDepth","tol_tree","Tree","TreeCanvas","leafContext","openLeafContext","leafContextX","leafContextY","outerPadding","canvasX","$on","nodeId","$nextTick","$off","newVal","oldVal","centerTree","newLeafs","differenceBy_default","showLeafDetails","zoomTo","$router","c","find_default","treeCanvas","clientWidth","clientHeight","components_tol_tree","appear","offset-x","offset-y","has-text-grey","update:computedBranches","update:computed-branches","leaf-click","zoom-in","src_components_tol_tree","tol_tree_normalizeComponent","BADFLAGS","filterByOTLMatches","otlMatches","reject_default","some_default","flags","f","otlNames","removeDuplicates","uniqBy_default","removeLackingVernacularName","tol_common_name_search","scientificResults","searchEntry","isFetching","isFetchingSci","overlayOpen","openOverlay","overflow","overlayInput","focus","closeOverlay","search","trim","execSearch","searchGbif","searchWikidata","errorMsg","findByCommonName","commonNames","findInfoByCommonName","selectResult","duration","components_tol_common_name_search","keyup","_k","keyCode","directives","rawName","expression","placeholder","model","callback","$$v","input","src_components_tol_common_name_search","tol_common_name_search_normalizeComponent","suggestions","desc","ottIds","tol_suggested_trees","suggest","components_tol_suggested_trees","_m","sug","domProps","innerHTML","src_components_tol_suggested_trees","tol_suggested_trees_normalizeComponent","docEl","canFullscreen","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","fullscreenEventName","tol","wideMode","horizontalMode","TOLTree","TOLCommonNameSearch","TOLSuggestedTrees","navOpen","isInFullscreen","tourMessage","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","treeIsEmpty","oldIds","onIdsChanged","$snackbar","actionText","onError","showError","queue","undo","redo","forward","setLeafs","uniq_default","addLeaf","castArray_default","filter_default","startsWith_default","union_default","removeLeaf","difference_default","onRemoveLeaf","onSelect","cutBranch","getChildren","ch","addNode","bluebird_default","showMetaInfo","$root","menuToggle","fullscreenToggle","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","setOption","share","location","startTour","pages_tol","nav-open","grouped","data-v-tour","pulsing","card-width","pack","src_pages_tol","tol_normalizeComponent","getOption","def","parseInt","Router","router","routes","path","PageTOL","route","_compact","txnCats","TourTree","TourSteps","content","onEnter","querySelector","classList","add","placement","onLeave","TourCallbacks","onStart","execStepCallbacks","step","currentStep","onPreviousStep","current","onNextStep","onStop","app","throttle_default","$tours","$children","createStep","selectortype_template_index_0_src_app","steps","callbacks","src_app","app_normalizeComponent","titleCase","w","_capitalize","numberRanges","range","suffix","decimals","Infinity","shortNumber","cfg","toFixed","truncate","sfx","substr","install","_filter","Buefy","defaultContainerElement","Filters","VueMotion","VueTour","VueAwesomeSwiper","productionTip","html","MetaInfoComponent","template","getElementById","parentNode","showInfo","get","set","App"],"mappings":"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Q,SAaS,kBAEU,MAUG,QCJhC8vB,KAEArgB,MAAA,mBACA5P,MAAA,kIACAkwB,KAAA,8RACAC,QACA,YACA,YACA,aACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,eAIAvgB,MAAA,gBACA5P,MAAA,4EACAkwB,KAAA,iDACAC,QACA,YACA,YACA,YACA,eAIAvgB,MAAA,0BACAsgB,KAAA,iDACAlwB,MAAA,gLACAmwB,QACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,WACA,cAIAvgB,MAAA,OACAsgB,KAAA,mDACAlwB,MAAA,kIACAmwB,QACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,WACA,cAIAvgB,MAAA,mBACA5P,MAAA,oEACAkwB,KAAA,2CACAC,QACA,YACA,YACA,YACA,YACA,aACA,WACA,YACA,YACA,aACA,aACA,YACA,YACA,YACA,WACA,eAIAvgB,MAAA,oCACA5P,MAAA,gJACAkwB,KAAA,mIACAC,QACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,aACA,aACA,YACA,aACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,gBAIAvgB,MAAA,mBACAsgB,KAAA,6DACAlwB,MAAA,kGACAmwB,QACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,eAKAC,IACA1xB,KAAA,oBACAC,SACAQ,cAEAL,KAAA,kBACAmxB,iBAEA7wB,SACAixB,QADA,SACAvV,GACA7b,KAAAub,MAAA,UAAAM,MC5KewV,IADEhxB,OAFP,WAAgB,IAAA8B,EAAAnC,KAAaM,EAAA6B,EAAA5B,eAA0BC,EAAA2B,EAAA1B,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,oBAA8ByB,EAAAmvB,GAAA,GAAAnvB,EAAArB,GAAAqB,EAAA,qBAAAovB,GAAmD,OAAA/wB,EAAA,WAAqBE,YAAA,uBAAA+Y,IAAuCC,MAAA,SAAAC,GAAyB,OAAAxX,EAAAivB,QAAAG,EAAAL,YAA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","file":"static/js/app.58f57c2e01c861f142b4.js","sourcesContent":["import Vue from 'vue'\n\nexport default new Vue()\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pubsub.js","<template lang=\"pug\">\n.wrap\n  .single(v-if=\"!useCollage\")\n    img(:src=\"images[0]\")\n  .collage(v-if=\"useCollage\")\n    .image(v-for=\"image in images\")\n      img(:src=\"image\")\n</template>\n\n<script>\nexport default {\n  name: 'Collage'\n  , props: {\n    images: Array\n  }\n  , data: () => ({\n\n  })\n  , computed: {\n    useCollage(){\n      return this.images.length > 3\n    }\n  }\n  , components: {\n  }\n  , methods: {\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n@import '@/styles/_variables.scss'\n.wrap\n  line-height: 0\n  width: 100%\n  height: 100%\n  overflow: hidden\n  border-radius: 2px\n\n  .single img\n    width: 100%\n\n.collage\n  height: 200%\n  column-count: 2\n  column-gap: 0\n  column-fill: balance\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/collage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[(!_vm.useCollage)?_c('div',{staticClass:\"single\"},[_c('img',{attrs:{\"src\":_vm.images[0]}})]):_vm._e(),(_vm.useCollage)?_c('div',{staticClass:\"collage\"},_vm._l((_vm.images),function(image){return _c('div',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":image}})])}),0):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9a078c34\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/collage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9a078c34\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./collage.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./collage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./collage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9a078c34\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./collage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9a078c34\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/collage.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.leaf-menu()\n  .flap-title(v-if=\"flapStyle && commonName\")\n    b-tooltip.common-name(:label=\"commonName | titleCase\", type=\"is-dark\", :active=\"commonName.length > (truncateLength + 5)\")\n      .text {{ commonName | titleCase }}\n  .flap-title.flap-title-bottom(v-if=\"flapStyle\")\n    b-tooltip.scientific-name(:label=\"scientificName | titleCase\", type=\"is-dark\", :active=\"scientificName.length > (truncateLength + 5) || shortScientificName.length < scientificName.length\")\n      .text {{ shortScientificName }}\n  .toolbar.primary\n    .button-overlay\n      slot\n    .background-image(:class=\"{ darken: !flapStyle }\")\n      Collage(:images=\"images\")\n    .toolbar-item(v-if=\"!flapStyle\")\n      .toolbar-text.names.item-title\n        b-tooltip.common-name(v-if=\"commonName\", :label=\"commonName | titleCase\", type=\"is-dark\", :active=\"commonName.length > truncateLength\")\n          | {{ commonName | titleCase | truncate(truncateLength) }}\n        b-tooltip.scientific-name(:label=\"scientificName | titleCase\", type=\"is-dark\", :active=\"scientificName.length > truncateLength || shortScientificName.length < scientificName.length\")\n          | {{ shortScientificName | truncate(truncateLength) }}\n</template>\n\n<script>\nimport Collage from '@/components/collage'\n\nexport default {\n  name: 'LeafViewMenu'\n  , props: {\n    commonName: String\n    , flapStyle: Boolean\n    , scientificName: String\n    , shortScientificName: String\n    , images: Array\n    , truncateLength: {\n      type: Number\n      , default: 10\n    }\n  }\n  , data: () => ({\n\n  })\n  , computed: {\n    backgroundStyle(){\n      if ( !this.images || !this.images.length ){ return '' }\n      return `url(${this.images[0]})`\n    }\n  }\n  , components: {\n    Collage\n  }\n  , methods: {\n\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n@import '@/styles/_variables.scss'\n$menuHeight: 74px\n$menuBackgroundColor: $blue\n$lighterGrey: lighten($grey, 12)\n.leaf-menu\n  position: relative\n  width: 100%\n.flap-title\n  position: absolute\n  top: -1.4em\n  left: 10px\n  right: 10px\n  border-radius: 3px 3px 0 0\n  background: $white\n  // border: 1px solid desaturate(lighten($blue, 20), 50)\n  color: $lighterGrey\n  .scientific-name,\n  .common-name\n    display: block\n    width: 100%\n  .text\n    padding: 0 0.5em\n    white-space: nowrap\n    text-align: center\n    text-overflow: ellipsis\n    overflow: hidden\n.flap-title-bottom\n  top: auto\n  bottom: -1.4em\n  border-radius: 0 0 3px 3px\n.background-image\n  position: absolute\n  top: 0\n  left: 0\n  right: 0\n  bottom: 0\n  z-index: -1\n  background-position: center top\n  background-size: cover\n  background-repeat: no-repeat\n  &.darken\n    filter: saturate(0.8) brightness(0.65)\n.primary, .secondary\n  height: $menuHeight\n  // border: 1px solid $grey-light\n  border-radius: 3px\n  border-color: $blue\n  background: $white\n  transition: transform .3s ease-in-out\n  backface-visibility: hidden;\n  transform-style: preserve-3d;\n  &:hover\n    cursor: pointer\n.primary\n  box-shadow: 0 0 1px rgba(0, 0, 0, 0.2)\n  background: $grey-darker\n  transform: translateZ(-$menuHeight/2) rotateX(0deg) translateZ($menuHeight/2)\n  .active &\n    transform: translateZ(-$menuHeight/2) rotateX(90deg) translateZ($menuHeight/2)\n.secondary\n  background: $grey-darker\n  position: absolute\n  top: 0\n  left: 0\n  transform: translateZ(-$menuHeight/2) rotateX(-90deg) translateZ($menuHeight/2)\n  .active &\n    transform: translateZ(-$menuHeight/2) rotateX(0deg) translateZ($menuHeight/2)\n.button-overlay\n  position: absolute\n  z-index: 2\n  width: 100%\n  height: 100%\n  display: flex\n  align-items: stretch\n  > *\n    flex-grow: 1\n    display: flex\n    align-items: center\n    justify-content: center\n    background: transparentize($blue, 0.4)\n    transition: background 0.3s ease\n    &:hover\n      background: transparentize($blue, 0.1)\n    &:first-child\n      border-radius: 2px 0 0 2px\n      border-right: 1px solid rgba(255, 255, 255, 0.6)\n    &:last-child\n      border-radius: 0 2px 2px 0\n\n  // &:hover\n  //   color: $primary\n// legacy...\n.toolbar .vertical-buttons .toolbar-control\n  padding: 5px 5px\n  transition: background 0.15s ease-in-out\n  background: darken($menuBackgroundColor, 8)\n  box-shadow: inset 1px 0px 0px 0px darken($menuBackgroundColor, 18)\n  border-top: 1px solid darken($menuBackgroundColor, 2)\n  border-bottom: 1px solid darken($menuBackgroundColor, 18)\n\n  &:first-child\n    border-top: none\n    border-radius: 0 2px 0 0\n  &:last-child\n    border-radius: 0 0 2px 0\n\n  &:hover\n    background: darken($menuBackgroundColor, 4)\n  &:active\n    background: darken($menuBackgroundColor, 2)\n  .icon\n    color: darken($menuBackgroundColor, 30)\n    text-shadow: 0.5px 0.5px 1px lighten($menuBackgroundColor, 18)\n\n.secondary .toolbar-control\n  color: $grey-light\n  &:hover\n    color: $white\n.toolbar > .toolbar-item .toolbar-text.names\n  padding: 0 0 0 1em\n  height: 100%\n  display: flex\n  flex-direction: column\n  flex-wrap: nowrap\n  justify-content: center\n  word-break: break-all\n  hyphens: auto\n  .common-name,\n  .scientific-name\n    display: block\n    color: $white-ter\n    text-shadow: 0 0 6px $black-bis\n    &:after\n      text-shadow: none\n  .common-name\n    font-weight: 500\n  .scientific-name\n    font-style: italic\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tol-leaf-view/leaf-view-menu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"leaf-menu\"},[(_vm.flapStyle && _vm.commonName)?_c('div',{staticClass:\"flap-title\"},[_c('b-tooltip',{staticClass:\"common-name\",attrs:{\"label\":_vm._f(\"titleCase\")(_vm.commonName),\"type\":\"is-dark\",\"active\":_vm.commonName.length > (_vm.truncateLength + 5)}},[_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(_vm._f(\"titleCase\")(_vm.commonName)))])])],1):_vm._e(),(_vm.flapStyle)?_c('div',{staticClass:\"flap-title flap-title-bottom\"},[_c('b-tooltip',{staticClass:\"scientific-name\",attrs:{\"label\":_vm._f(\"titleCase\")(_vm.scientificName),\"type\":\"is-dark\",\"active\":_vm.scientificName.length > (_vm.truncateLength + 5) || _vm.shortScientificName.length < _vm.scientificName.length}},[_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.shortScientificName))])])],1):_vm._e(),_c('div',{staticClass:\"toolbar primary\"},[_c('div',{staticClass:\"button-overlay\"},[_vm._t(\"default\")],2),_c('div',{staticClass:\"background-image\",class:{ darken: !_vm.flapStyle }},[_c('Collage',{attrs:{\"images\":_vm.images}})],1),(!_vm.flapStyle)?_c('div',{staticClass:\"toolbar-item\"},[_c('div',{staticClass:\"toolbar-text names item-title\"},[(_vm.commonName)?_c('b-tooltip',{staticClass:\"common-name\",attrs:{\"label\":_vm._f(\"titleCase\")(_vm.commonName),\"type\":\"is-dark\",\"active\":_vm.commonName.length > _vm.truncateLength}},[_vm._v(_vm._s(_vm._f(\"truncate\")(_vm._f(\"titleCase\")(_vm.commonName),_vm.truncateLength)))]):_vm._e(),_c('b-tooltip',{staticClass:\"scientific-name\",attrs:{\"label\":_vm._f(\"titleCase\")(_vm.scientificName),\"type\":\"is-dark\",\"active\":_vm.scientificName.length > _vm.truncateLength || _vm.shortScientificName.length < _vm.scientificName.length}},[_vm._v(_vm._s(_vm._f(\"truncate\")(_vm.shortScientificName,_vm.truncateLength)))])],1)]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-608a73d5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tol-leaf-view/leaf-view-menu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-608a73d5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./leaf-view-menu.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./leaf-view-menu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./leaf-view-menu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-608a73d5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./leaf-view-menu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-608a73d5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tol-leaf-view/leaf-view-menu.vue\n// module id = null\n// module chunks = ","import Promise from 'bluebird'\n\nconst defaultLifetime = 1000 * 60 * 15\n\nfunction getKey( args ){\n  return JSON.stringify( args )\n}\n\nfunction getCached( cache, key ){\n  return cache[ key ]\n}\n\nfunction cacheResult( cache, key, result, lifetime ){\n  cache[ key ] = {\n    expires: Date.now() + lifetime\n    , result\n  }\n\n  return result\n}\n\nfunction isExpired( entry ){\n  return entry.expires < Date.now()\n}\n\nfunction clean( cache ){\n  let keys = Object.keys( cache )\n  for ( let k of keys ){\n    if ( isExpired( cache[k] ) ){\n      delete cache[k]\n    }\n  }\n}\n\nexport default function( fn, lifetime = defaultLifetime ){\n  const cache = {}\n\n  // clean every 10s\n  window.setInterval( () => clean( cache ), 1000 * 10 )\n\n  return function( ...args ){\n    let key = getKey( args )\n    let cachedResult = getCached( cache, key )\n\n    if ( cachedResult && !isExpired( cachedResult ) ){\n      return Promise.resolve( cachedResult.result )\n    }\n\n    return Promise.resolve( fn( ...args ) )\n      .then( result => cacheResult( cache, key, result, lifetime ) )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/cacher.js","// Helpers for OTL api\n// https://github.com/OpenTreeOfLife/germinator/wiki/TNRS-API-v3\n// ---------------------------------------\nimport Promise from 'bluebird'\nimport _castArray from 'lodash/castArray'\nimport _startsWith from 'lodash/startsWith'\nimport _find from 'lodash/find'\nimport _sortBy from 'lodash/sortBy'\nimport _takeWhile from 'lodash/takeWhile'\nimport _every from 'lodash/every'\nimport cacher from './cacher'\nimport axios from 'axios'\n\nconst SERVER_TIMEOUT = 10 * 1000\n\nconst otol = axios.create({\n  baseURL: 'https://api.opentreeoflife.org/v3'\n  // baseURL: 'https://ot39.opentreeoflife.org/v3'\n  , timeout: SERVER_TIMEOUT\n  , crossdomain: true\n})\n\nfunction getCommonLineage( nodes ){\n  let lineages = nodes.map( n => [].concat(n.lineage) )\n  lineages.forEach( l => l.reverse() )\n  lineages = _sortBy( lineages, l => l.length )\n  let longest = lineages.pop()\n  let common = _takeWhile( longest, (p, idx) =>\n    _every(lineages, l => l[idx] && l[idx].node_id === p.node_id)\n  )\n  common.pop() // mrca\n  common.reverse()\n  return common\n}\n\n// Get node info\n// id can be either node_id or ott_id. It will auto detect\n// ---------------------------------------\nexport const getNode = cacher(function( id ){\n  if ( _startsWith( id, 'mrca' ) ){\n    return getMRCA( id )\n  }\n  var idField = typeof id === 'string' ? 'node_id' : 'ott_id'\n  var data = {\n    [idField]: id\n    , include_lineage: true\n  }\n  return Promise.resolve( otol.post('/tree_of_life/node_info', data) )\n    .then( res => res.data )\n    .tap( data => {\n      if ( data.response_for_mrca_of_broken_taxon ){\n        console.error('WARNING: Received response_for_mrca_of_broken_taxon from OTOL')\n      }\n    })\n})\n\n// Get most recent common ancestor of nodes by id or mrca id string\n// ---------------------------------------\nexport function getMRCA( idOrArray ){\n  if ( typeof idOrArray === 'string' ){\n    idOrArray = idOrArray.match(/(ott[\\d]+)/g)\n  }\n\n  var data = {\n    node_ids: idOrArray\n  }\n  return Promise.resolve( otol.post('/tree_of_life/mrca', data) )\n    .then( res => res.data.mrca )\n    .then( data => {\n      return Promise.all([\n        Promise.map( idOrArray, getNode )\n        , data.taxon ? data.taxon : getDescendantNames( data.node_id ).then( childrenNames => ({\n          name: `${childrenNames.join(' and ')}`\n        }))\n      ]).spread( (nodes, taxon) => {\n        let lineage = getCommonLineage( nodes )\n\n        data.taxon = taxon\n\n        data.lineage = lineage\n\n        return data\n      })\n    })\n}\n\nexport function getTxResultsByNames( names = [] ){\n  var data = {\n    names: _castArray( names )\n  }\n\n  return Promise.resolve( otol.post('/tnrs/match_names', data) )\n    .then( res => res.data.results )\n}\n\n// Helper for finding a OTOL node by its tx name\nexport const getNodeByName = cacher(function( name ){\n  return getTxResultsByNames( name )\n    .then( results => _find(results, {'name': name}) )\n    .then( result => {\n      if (!result){\n        throw new Error('Node not found')\n      }\n\n      return result.matches[0].taxon.ott_id\n    })\n    .then( getNode )\n})\n\nexport const getOttIdBySource = cacher(function( source ){\n  let data = {\n    source_id: source\n  }\n\n  return Promise.resolve( otol.post('/taxonomy/taxon_info', data) )\n    .then( res => res.data.ott_id )\n})\n\nexport const getSubtree = cacher(function( id, depth = 1 ){\n  var idField = _startsWith( id, 'ott' ) || _startsWith( id, 'mrca' ) ? 'node_id' : 'ott_id'\n  var data = {\n    [idField]: id\n    , format: 'arguson'\n    , height_limit: depth\n  }\n  return Promise.resolve( otol.post('/tree_of_life/subtree', data) )\n    .then( res => res.data.arguson.children || [] )\n})\n\nexport const getDescendantNames = cacher(function( id ){\n  var idField = _startsWith( id, 'ott' ) || _startsWith( id, 'mrca' ) ? 'node_id' : 'ott_id'\n  var data = {\n    [idField]: id\n    , format: 'arguson'\n    , height_limit: 1\n  }\n  return Promise.resolve( otol.post('/tree_of_life/subtree', data) )\n    .then( res => res.data.arguson.descendant_name_list || [] )\n})\n\nexport function getTxnSourceId( type, node ){\n  if ( !node.taxon ){ return null }\n  let str = _find(node.taxon.tax_sources, (x) => _startsWith(x, type))\n  if ( !str ){\n    return null\n  }\n  return str.replace(`${type}:`, '')\n}\n\nexport function getGbifId( node ){\n  return getTxnSourceId( 'gbif', node )\n}\n\nexport function getWormsId( node ){\n  return getTxnSourceId( 'worms', node )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/otol.js","// Helpers for https://www.gbif.org/developer\n// https://www.gbif.org/developer/registry\n// ---------------------------------------\nimport Promise from 'bluebird'\nimport axios from 'axios'\nimport { setupCache } from 'axios-cache-adapter'\nimport _startCase from 'lodash/startCase'\nimport _uniq from 'lodash/uniq'\n// import _union from 'lodash/union'\nimport _flow from 'lodash/flow'\n\nconst SERVER_TIMEOUT = 10 * 1000\n\nconst parseParams = (params) => {\n  const keys = Object.keys(params)\n  let options = ''\n\n  keys.forEach((key) => {\n    const isParamTypeObject = typeof params[key] === 'object'\n    const isParamTypeArray = isParamTypeObject && (params[key].length >= 0)\n\n    if (!isParamTypeObject) {\n      options += `${key}=${params[key]}&`\n    }\n\n    if (isParamTypeObject && isParamTypeArray) {\n      params[key].forEach((element) => {\n        options += `${key}=${element}&`\n      })\n    }\n  })\n\n  return options ? options.slice(0, -1) : options\n}\n\nconst langs = ['', 'en', 'eng']\n\nconst cache = setupCache({\n  maxAge: 15 * 60 * 1000\n  , key: req => req.url + JSON.stringify(req.params)\n  , exclude: {\n    query: false\n  }\n})\n\nconst gbif = axios.create({\n  baseURL: 'https://api.gbif.org/v1'\n  , timeout: SERVER_TIMEOUT\n  , adapter: cache.adapter\n  , crossdomain: true\n  , paramsSerializer: params => parseParams(params)\n})\n\nfunction setVernacularNames( entry ){\n  if ( !entry.vernacularNames ){\n    entry.vernacularNames = []\n\n    if ( entry.vernacularName ){\n      entry.vernacularNames.push({ vernacularName: entry.vernacularName, language: 'eng' })\n    }\n  }\n\n  var vernacularNameList = entry.vernacularNames.filter(n => !n.language || langs.indexOf(n.language) > -1)\n  vernacularNameList = vernacularNameList.map( _flow([\n    n => n.vernacularName\n    , _startCase\n  ]) )\n  vernacularNameList = _uniq(vernacularNameList).join(', ')\n  return { ...entry, vernacularNameList }\n}\n\nexport function getById( id ){\n  return Promise.resolve( gbif(`/species/${id}`) )\n    .then( res => setVernacularNames( res.data ) )\n}\n\nexport function findByCommonName( q ){\n  var params = {\n    qField: 'VERNACULAR'\n    , status: 'ACCEPTED'\n    , dataset_key: 'fab88965-e69d-4491-a04d-e3198b626e52' // NCBI Database\n    // , rank: ['SUBSPECIES', 'SPECIES']\n    , q\n  }\n  return gbif('/species/search', { params })\n    .then( d => d.data.results )\n    .then( results => results.map( setVernacularNames ) )\n}\n\nexport function findByScientificName( q ){\n  var params = {\n    qField: 'SCIENTIFIC'\n    , status: 'ACCEPTED'\n    , dataset_key: 'fab88965-e69d-4491-a04d-e3198b626e52' // NCBI Database\n    // , rank: 'SUBSPECIES'\n    , q\n  }\n  return gbif('/species/search', { params })\n    .then( d => d.data.results )\n    .then( results => results.map( setVernacularNames ) )\n}\n\nexport function findByName( name ){\n  var params = {\n    name\n  }\n  return Promise.resolve( gbif('/species', { params }) )\n    .then( res => res.data.results.map( setVernacularNames ) )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/gbif.js","import Promise from 'bluebird'\n\nexport default class Throttler {\n  constructor( delay, batchSize = 1 ){\n    this.delay = delay\n    this.batchSize = batchSize\n    this.count = 0\n  }\n\n  schedule( arg ){\n    this.count++\n    let batch = Math.floor(this.count / this.batchSize)\n    let delay = batch * this.delay\n    return Promise.delay( delay ).tap( () => (this.count--) ).return( arg )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/throttler.js","// Helpers for https://query.wikidata.org\n// ---------------------------------------\nimport Promise from 'bluebird'\nimport axios from 'axios'\nimport { setupCache } from 'axios-cache-adapter'\nimport _pick from 'lodash/pick'\nimport _groupBy from 'lodash/groupBy'\nimport _transform from 'lodash/transform'\nimport _omit from 'lodash/omit'\nimport _values from 'lodash/values'\nimport _mapValues from 'lodash/mapValues'\nimport Throttler from './throttler'\n\nconst SERVER_TIMEOUT = 10 * 1000\n\nconst cache = setupCache({\n  maxAge: 15 * 60 * 1000\n  , exclude: {\n    query: false\n  }\n})\n\nconst wikidata = axios.create({\n  baseURL: 'https://query.wikidata.org'\n  , headers: {\n    'Accept': 'application/sparql-results+json'\n    // , 'Access-Control-Allow-Origin': '*'\n  }\n  , params: {\n    // origin: window.location.origin\n  }\n  , crossdomain: true\n  , timeout: SERVER_TIMEOUT\n  , adapter: cache.adapter\n})\n\nconst throttler = new Throttler( 200, 3 )\n\nwikidata.interceptors.request.use( config => throttler.schedule( config ) )\n\nfunction getItemId( url = '' ){\n  let m = url.match(/\\/([A-z1-9]+$)/)\n  return (m && m[1]) || ''\n}\n\nfunction assembleByItem( results ){\n  const singleProps = ['item', 'itemId', 'itemLabel']\n  // get array of results of objects\n  let items = _groupBy( results, 'itemId' )\n  // want them grouped by itemId\n  return _values(items).map( ( parts ) => {\n    // map the array into an object of array properties\n    // take the first one and use it to set the base object\n    let item = _pick(parts[0], singleProps)\n    return _transform( parts, (result, part) => {\n      Object.keys(_omit(part, singleProps)).forEach( key => {\n        result[key] = result[key] || []\n        if ( result[key].indexOf(part[key]) < 0 ){\n          result[key].push( part[key] )\n        }\n      })\n      return result\n    }, item )\n  } )\n}\n\nwikidata.interceptors.response.use(function (response) {\n  // make it work with cache adaptor\n  if ( response.request.fromCache ){\n    return response\n  }\n  // Do something with response data\n  const { head: { vars }, results } = response.data\n  response.data = results.bindings.map( item =>\n    Object.assign({ itemId: getItemId(item.item.value) }, _mapValues(_pick(item, vars), 'value'))\n  )\n  response.data = assembleByItem(response.data)\n  return response\n}, function (error) {\n  console.dir(error)\n  // just return\n  return Promise.reject(error)\n})\n\nexport function findInfoByNcbiId( ncbiId, { limit, lang } = {} ){\n\n  const sparqlQuery = `SELECT ?item ?itemLabel ?pic ?commonName WHERE {\n    ?item wdt:P685 \"${ncbiId}\".\n    OPTIONAL { ?item wdt:P18 ?pic. }\n    OPTIONAL { ?item wdt:P1843 ?commonName FILTER (lang(?commonName) = '${lang || 'en'}'). }\n    SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\n  }\n  LIMIT ${limit || 10}`\n\n  return Promise.resolve( wikidata('sparql?query=' + encodeURIComponent( sparqlQuery )) )\n    .then( res => res.data )\n}\n\nexport function findInfoByScientificName( name, { limit, lang } = {} ){\n\n  const sparqlQuery = `SELECT ?item ?itemLabel ?pic ?commonName WHERE {\n    ?item wdt:P225 \"${name}\".\n    OPTIONAL { ?item wdt:P18 ?pic. }\n    OPTIONAL { ?item wdt:P1843 ?commonName FILTER (lang(?commonName) = '${lang || 'en'}'). }\n    SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\n  }\n  LIMIT ${limit || 10}`\n\n  return Promise.resolve( wikidata('sparql?query=' + encodeURIComponent( sparqlQuery )) )\n    .then( res => res.data )\n}\n\nexport function findInfoByCommonName( q, { limit } = {} ){\n\n  if ( !q ){\n    return Promise.resolve([])\n  }\n\n  const sparqlQuery = `SELECT DISTINCT ?item ?scientificName ?pic ?commonName WHERE {\n    ?item wdt:P1843 ?commonName FILTER regex(?commonName, \"${q}\", \"i\").\n    { ?item wdt:P105 wd:Q7432. }\n    UNION\n    { ?item wdt:P105 wd:Q68947. }\n    ?item wdt:P225 ?scientificName.\n    OPTIONAL { ?item wdt:P18 ?pic. }\n    SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\n  }\n  LIMIT ${limit || 10}`\n\n  return Promise.resolve( wikidata('sparql?query=' + encodeURIComponent( sparqlQuery )) )\n    .then( res => res.data )\n}\n\nexport function findInfoBy( { ncbiId, name }, { limit, lang } = {} ){\n\n  if ( !ncbiId && !name ){\n    return Promise.resolve([])\n  }\n\n  if ( !name ){\n    return findInfoByNcbiId( ncbiId )\n  }\n\n  if ( !ncbiId ){\n    return findInfoByScientificName( name )\n  }\n\n  const sparqlQuery = `SELECT DISTINCT ?item ?itemLabel ?pic ?commonName WHERE {\n    { ?item wdt:P685 \"${ncbiId}\". }\n    UNION\n    { ?item wdt:P225 \"${name}\". }\n    OPTIONAL { ?item wdt:P18 ?pic. }\n    OPTIONAL { ?item wdt:P1843 ?commonName FILTER (lang(?commonName) = '${lang || 'en'}'). }\n    SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\n  }\n  LIMIT ${limit || 10}`\n\n  return Promise.resolve( wikidata('sparql?query=' + encodeURIComponent( sparqlQuery )) )\n    .then( res => res.data )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/wikidata.js","// Helpers for https://commons.wikimedia.org\n// ---------------------------------------\nimport Promise from 'bluebird'\nimport axios from 'axios'\nimport { setupCache } from 'axios-cache-adapter'\nimport _values from 'lodash/values'\nimport _get from 'lodash/get'\nimport _sortBy from 'lodash/sortBy'\nimport _mapValues from 'lodash/mapValues'\n\nconst SERVER_TIMEOUT = 10 * 1000\n\nconst cache = setupCache({\n  maxAge: 15 * 60 * 1000\n  , key: req => req.url + JSON.stringify(req.params)\n  , exclude: {\n    query: false\n  }\n})\n\nconst wikimedia = axios.create({\n  // baseURL: 'https://commons.wikimedia.org/w'\n  baseURL: 'https://species.wikimedia.org/w'\n  , timeout: SERVER_TIMEOUT\n  , crossdomain: true\n  , adapter: cache.adapter\n})\n\nfunction mapImageResults( results ){\n  return results.map( (page) => {\n    let image = page.imageinfo[0]\n    image = _mapValues( image, val => typeof val === 'string' ? val.replace('http:', 'https:') : val )\n    return {\n      pageid: page.pageid\n      , image\n    }\n  })\n}\n\nexport function findImagesByName( name, { limit, thumbSize } = {} ){\n\n  var params = {\n    'action': 'query'\n    , 'prop': 'imageinfo'\n    , 'generator': 'search'\n    , 'gsrsearch': `File:\"${name}\" NOT map NOT atlas NOT lineage NOT svg NOT phylogram NOT cladogram NOT Destroy_this_mad_brute NOT Classification NOT Anatomical_Man`\n    , 'format': 'json'\n    , 'origin': '*'\n    , 'iiprop': 'url|size'\n  }\n\n  if ( thumbSize ){\n    params.iiurlwidth = thumbSize\n  }\n\n  return Promise.resolve( wikimedia('api.php', { params }) )\n    .then( res => res.data )\n    .then( data => _values( _get(data, 'query.pages') ) )\n    .then( results => results.filter( r => r.title.match(/\\.(gif|png|jpe?g|svg)$/) ) )\n    .then( results => _sortBy(results, 'index') )\n    .then( mapImageResults )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/wikimedia.js","export default [\n  'https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Homininae_el.png/200px-Homininae_el.png'\n  , 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Hominini.ar.png/200px-Hominini.ar.png'\n  , 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/LA2-NSRW-1-0307.jpg/200px-LA2-NSRW-1-0307.jpg'\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/image-blacklist.js","export default {\n  'ott335582': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/1/14/Soimese_Crocicodile.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/Soimese_Crocicodile.jpg/200px-Soimese_Crocicodile.jpg'\n  }\n  , 'ott517942': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/6/68/Abete_rosso_1.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/Abete_rosso_1.jpg/180px-Abete_rosso_1.jpg'\n  }\n  , 'ott568878': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/5/53/Pink_striped_mini_phalaenopsis_orchid.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Pink_striped_mini_phalaenopsis_orchid.jpg/320px-Pink_striped_mini_phalaenopsis_orchid.jpg'\n  }\n  , 'ott1007058': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/2/2a/Thorny_Seahorse_with_Jockey_-_Hippocampus_jayakari.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Thorny_Seahorse_with_Jockey_-_Hippocampus_jayakari.jpg/320px-Thorny_Seahorse_with_Jockey_-_Hippocampus_jayakari.jpg'\n  }\n  , 'ott352914': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/b/b1/Fungi_city.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Fungi_city.jpg/320px-Fungi_city.jpg'\n  }\n  , 'ott698424': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/5/5c/Killer_whales_%40_Ocean_Show_%288783294977%29.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Killer_whales_%40_Ocean_Show_%288783294977%29.jpg/320px-Killer_whales_%40_Ocean_Show_%288783294977%29.jpg'\n  }\n  , 'ott186816': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/9/94/Snake_King_Cobra.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/Snake_King_Cobra.jpg/320px-Snake_King_Cobra.jpg'\n  }\n  , 'ott417957': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/1/13/Chimpanzee_%2813968481823%29.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/Chimpanzee_%2813968481823%29.jpg/284px-Chimpanzee_%2813968481823%29.jpg'\n  }\n  , 'ott541924': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/b/bb/2014-11-23_067_Elefant_%28Elephantidae%29_anagoria.JPG'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/2014-11-23_067_Elefant_%28Elephantidae%29_anagoria.JPG/320px-2014-11-23_067_Elefant_%28Elephantidae%29_anagoria.JPG'\n  }\n  , 'ott770309': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/homo-sapiens.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/homo-sapiens.jpg'\n  }\n  , 'ott770315': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/homo-sapiens.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/homo-sapiens.jpg'\n  }\n  , 'ott563166': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/d/dc/Felis_catus_02.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Felis_catus_02.jpg/200px-Felis_catus_02.jpg'\n  }\n  , 'ott763018': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/2/2d/CloudedLeopard.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/CloudedLeopard.jpg/200px-CloudedLeopard.jpg'\n  }\n  , 'ott532127': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/c/c5/Snow_leoaprd_in_snow.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Snow_leoaprd_in_snow.jpg/200px-Snow_leoaprd_in_snow.jpg'\n  }\n  , 'ott78477': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/selachii.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/selachii.jpg'\n  }\n  , 'ott1005907': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/carassius-auratus.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/carassius-auratus.jpg'\n  }\n  , 'ott244265': {\n    pic: 'https://upload.wikimedia.org/wikipedia/commons/3/3b/Uganda-Kob.jpg'\n    , thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Uganda-Kob.jpg/200px-Uganda-Kob.jpg'\n  }\n  , 'ott802117': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/mollusca.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/mollusca.jpg'\n  }\n  , 'ott510761': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/hippopotamus-amphibius.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/hippopotamus-amphibius.jpg'\n  }\n  , 'ott510762': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/hippopotamus-amphibius.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/hippopotamus-amphibius.jpg'\n  }\n  , 'ott490099': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/bos-taurus.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/bos-taurus.jpg'\n  }\n  , 'ott312031': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/homininae.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/homininae.jpg'\n  }\n  , 'ott417969': {\n    pic: 'https://cdn.minutelabs.io/tree-of-life-explorer/gorilla.jpg'\n    , thumbnail: 'http://cdn.minutelabs.io/tree-of-life-explorer/gorilla.jpg'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/image-overrides.js","import Promise from 'bluebird'\nimport _union from 'lodash/union'\nimport _get from 'lodash/get'\nimport _mergeWith from 'lodash/mergeWith'\nimport _isArray from 'lodash/isArray'\nimport _indexOf from 'lodash/indexOf'\nimport _reject from 'lodash/reject'\nimport cacher from '@/lib/cacher'\nimport * as otol from '@/lib/otol'\nimport * as gbif from '@/lib/gbif'\n// import * as worms from '@/lib/worms'\nimport * as wikidata from '@/lib/wikidata'\nimport * as wikimedia from '@/lib/wikimedia'\nimport imageBlacklist from '@/lib/image-blacklist'\nimport imageOverrides from '@/lib/image-overrides'\n\nconst gbifMapping = {\n  'key': false\n  , 'nubKey': false\n  , 'nameKey': false\n  , 'taxonID': false\n  , 'sourceTaxonKey': false\n  , 'kingdom': true\n  , 'phylum': true\n  , 'kingdomKey': false\n  , 'phylumKey': false\n  , 'datasetKey': false\n  , 'constituentKey': false\n  , 'parentKey': false\n  , 'parent': true\n  , 'scientificName': true\n  , 'canonicalName': true\n  , 'vernacularName': true\n  , 'vernacularNames': true\n  , 'vernacularNameList': true\n  , 'authorship': true\n  , 'nameType': false\n  , 'rank': true\n  , 'origin': false\n  , 'taxonomicStatus': 'status'\n  , 'nomenclaturalStatus': false\n  , 'remarks': false\n  , 'numDescendants': true\n  , 'lastCrawled': false\n  , 'lastInterpreted': false\n  , 'issues': false\n  , 'synonym': false\n}\n\n// const wormsMapping = {\n//   'AphiaID': false\n//   , 'url': false\n//   , 'scientificname': 'canonicalName'\n//   , 'authority': false\n//   , 'rank': 'rank'\n//   , 'status': false\n//   , 'unacceptreason': false\n//   , 'valid_AphiaID': false\n//   , 'valid_name': false\n//   , 'valid_authority': false\n//   , 'kingdom': true\n//   , 'phylum': true\n//   , 'class': true\n//   , 'order': true\n//   , 'family': true\n//   , 'genus': true\n//   , 'citation': false\n//   , 'lsid': false\n//   , 'isMarine': false\n//   , 'isBrackish': false\n//   , 'isFreshwater': false\n//   , 'isTerrestrial': false\n//   , 'isExtinct': true\n//   , 'match_type': false\n//   , 'modified': false\n// }\n\n// function mapWikidataImages( data ){\n//   return data.reduce( (output, entry) => {\n//     output.wikidataImages.push(entry.pic)\n//     return output\n//   }, { wikidataImages: [] })\n// }\n\nexport function getMapping( data = {}, mapping ){\n  return Object.keys( mapping ).reduce( (obj, key) => {\n    let m = mapping[ key ]\n    if ( !m ){ return obj }\n    if ( m === true ){\n      m = key\n    }\n\n    obj[ m ] = data[ key ]\n    if ( typeof obj[ m ] === 'string' ){\n      obj[ m ] = obj[ m ].toLowerCase()\n    }\n\n    return obj\n  }, {})\n}\n\nfunction ensureVernacularNames( node, txn ){\n  if ( txn.vernacularNameList && txn.vernacularNameList.length ){\n    return txn\n  }\n\n  if ( !node.taxon ){ return txn }\n\n  return gbif.findByScientificName( node.taxon.unique_name )\n    .then( results => results[0] )\n    .then( data => getMapping( data, gbifMapping ) )\n    .then( data => ({ ...txn, ...data }) )\n}\n\nexport function getTaxonomyInfo( node ){\n\n  var types = {\n    'gbif': ( id ) => gbif.getById( id ).then( data => getMapping( data, gbifMapping ) )\n    // , 'worms': ( id ) => worms.getById( id ).then( data => getMapping( data, wormsMapping ) )\n  }\n\n  var queries = []\n\n  let txnInfoQueries = Promise.map( Object.keys(types), (type) => {\n    let id = otol.getTxnSourceId( type, node )\n    if ( !id ){\n      return null\n    }\n\n    return types[ type ]( id )\n  } )\n\n  queries.push( txnInfoQueries )\n\n  return Promise.all(queries)\n    .then( resultList => _union(...resultList) )\n    .then( results => results.reduce( (txn, data) => ({...txn, ...data}), {} ) )\n    .then( txn => ensureVernacularNames(node, txn) )\n}\n\nfunction toHTTPS( images ){\n  if ( !images || !images.map ){ return images }\n  return images.map( url => url.replace('http:', 'https:') )\n}\n\nfunction applyImageBlacklist( results ){\n  return _reject( results, item => {\n    return _indexOf( imageBlacklist, _get(item, 'image.thumburl') ) > -1\n  })\n}\n\nfunction applyImageOverrides( data, leaf ){\n  let override = imageOverrides[ leaf.node_id ]\n\n  if ( override ){\n    data.pic = _union(toHTTPS([ override.pic ]), data.pic )\n    data.thumbnail = _union(toHTTPS([ override.thumbnail ]), data.thumbnail )\n  }\n\n  return data\n}\n\nexport function getImagesAndCommonNames( name, ncbiId, rank, options = {} ){\n\n  return wikidata.findInfoBy({ ncbiId, name })\n    .then( data => {\n      let firstResult = (data && data[0]) || {}\n\n      if ( options.images === false ){\n        return firstResult\n      }\n\n      let promise\n\n      if ( rank && rank !== 'unranked' && rank !== 'class' ){\n        promise = Promise.join(\n          wikimedia.findImagesByName( `${rank} ${name}`, { thumbSize: options.thumbSize } )\n          , wikimedia.findImagesByName( name, { thumbSize: options.thumbSize } )\n          , ( first, second ) => _union( first, second )\n        )\n      } else {\n        promise = wikimedia.findImagesByName( name, { thumbSize: options.thumbSize } )\n      }\n\n      return promise\n        .then( data => applyImageBlacklist(data) )\n        .then( data => {\n          let images = data.map( item => _get( item, 'image.url' ) )\n          let thumbnails = data.map( item => _get( item, 'image.thumburl' ) )\n\n          firstResult.pic = _union( images, options.getAllImages ? firstResult.pic : [] )\n          firstResult.thumbnail = _union( thumbnails )\n          return firstResult\n        })\n    })\n    .then( data => {\n      data.pic = toHTTPS( data.pic )\n      data.thumbnail = toHTTPS( data.thumbnail )\n      return data\n    })\n}\n\nexport function isMRCA( leaf ){\n  return leaf.node_id.indexOf('mrca') === 0\n}\n\nexport const getTxnInfo = cacher(Promise.coroutine(function* ( leaf, options ){\n  if ( !leaf.taxon ){\n    leaf = yield getLeaf( leaf.node_id )\n  }\n\n  if ( isMRCA(leaf) ){\n    let names = leaf.taxon.name.split(' and ')\n    return Promise.map( names, name =>\n      getImagesAndCommonNames( name, null, leaf.taxon.rank, {getAllImages: false, thumbSize: options.thumbSize, images: options.images} )\n    ).then( results => {\n      return _mergeWith({}, leaf.taxon, ...results, (objValue, srcValue) => {\n        if ( _isArray(objValue) ) {\n          return objValue.concat(srcValue)\n        }\n      })\n    })\n  }\n\n  let ncbiId = otol.getTxnSourceId( 'ncbi', leaf )\n\n  return getTaxonomyInfo( leaf ).then( txnInfo => {\n    return getImagesAndCommonNames(\n      leaf.taxon.unique_name\n      , ncbiId\n      , leaf.taxon.rank\n      , {\n        getAllImages: false\n        , thumbSize: options.thumbSize\n        , images: options.images\n      }\n    ).then( imgNameData => {\n      imgNameData = applyImageOverrides(imgNameData, leaf)\n      return Object.assign({}, leaf.taxon, txnInfo, imgNameData)\n    })\n  })\n}))\n\nfunction Leaf( node ){\n  return {\n    ...node\n  }\n}\n\nexport function getLeaf( id ){\n  return otol.getNode( id ).then( node =>\n    Leaf( node )\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/taxonomy.js","export function copyToClipboard( str ) {\n  const el = document.createElement('textarea')\n  el.value = str\n  el.setAttribute('readonly', '')\n  el.style.position = 'absolute'\n  el.style.left = '-9999px'\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand('copy')\n  document.body.removeChild(el)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/utils.js","<template lang=\"pug\">\n.card\n  .card-content\n    .content\n      .columns\n        .column.is-half\n          .otl-id\n            span='OTL Id: {{ leaf.node_id }} '\n            a.has-text-small(@click=\"copyToClipboard(leaf.node_id)\") (copy)\n          h1.title.has-text-dark {{ scientificName }}\n          h4.subtitle(v-if=\"commonName\")\n            span.has-text-grey='Commonly known as a '\n            span.has-text-success {{ commonName }}\n\n          .tag-list(v-if=\"!isMRCA\")\n            .tags.has-addons(v-if=\"txnInfo.rank\")\n              span.tag.is-dark\n                | Rank\n              a(:href=\"rankLink\", target=\"_blank\").tag.rank-tag\n                | {{ txnInfo.rank }}\n            .tags.has-addons(v-if=\"txnInfo.numDescendants\")\n              span.tag.is-dark\n                | Decendants\n              span.tag.is-info(:title=\"txnInfo.numDescendants\")\n                | {{ txnInfo.numDescendants | shortNumber }}\n\n          b-message(v-if=\"isMRCA\", type=\"is-info\")\n            | This is an MRCA node\n        .column.is-half(v-if=\"txnInfo.thumbnail && txnInfo.thumbnail.length\")\n          swiper.info-window-swiper(:options=\"swiperOptions\")\n            swiper-slide(v-for=\"img in txnInfo.thumbnail\", :key=\"img\")\n              .image-slide\n                img(:src=\"img\")\n            .swiper-button-prev(v-if=\"!isTouch\", slot=\"button-prev\")\n              b-icon(icon=\"chevron-left\")\n            .swiper-button-next(v-if=\"!isTouch\", slot=\"button-next\")\n              b-icon(icon=\"chevron-right\")\n            .swiper-pagination(slot=\"pagination\")\n    .links\n      .is-size-5.heading Find more information on...\n      .columns.is-mobile.is-multiline\n        .column.is-one-quarter-tablet.is-half-mobile(v-for=\"link in links\")\n          a(:href=\"link.url\", target=\"_blank\")\n            .card.clickable\n              .card-image\n                figure.image\n                  img(:src=\"link.image\")\n              .card-content\n                .content.has-text-centered {{ link.text }}\n</template>\n\n<script>\nimport _remove from 'lodash/remove'\nimport { isMRCA } from '@/lib/taxonomy'\nimport { getTxnSourceId } from '@/lib/otol'\nimport { copyToClipboard } from '@/lib/utils'\n\nexport default {\n  name: 'TaxonomyInfoWindow'\n  , props: {\n    leaf: Object\n    , txnInfo: Object\n  }\n  , data: () => ({\n    currentPic: 0\n    , swiperOptions: {\n      navigation: {\n        nextEl: '.swiper-button-next'\n        , prevEl: '.swiper-button-prev'\n      }\n      , pagination: {\n        el: '.swiper-pagination'\n      }\n    }\n    , isTouch: ('ontouchstart' in document.documentElement)\n  })\n  , computed: {\n    commonName(){\n      if ( this.isMRCA ){ return '' }\n      if ( !this.txnInfo || !this.txnInfo.vernacularNameList ){\n        if ( this.otherCommonNames ){\n          return this.otherCommonNames[0]\n        }\n        return ''\n      }\n      return this.txnInfo.vernacularNameList\n    }\n    , scientificName(){\n      if ( !this.txnInfo ){ return '' }\n      return this.txnInfo.canonicalName ||\n        this.txnInfo.name ||\n        this.leaf.node_id || ''\n    }\n    , isMRCA(){\n      return this.leaf && isMRCA(this.leaf)\n    }\n    , rankLink(){\n      return `https://en.wikipedia.org/wiki/${this.txnInfo.rank}_(biology)`\n    }\n    , links(){\n      let ncbiId = getTxnSourceId( 'ncbi', this.leaf )\n      let gbifId = getTxnSourceId( 'gbif', this.leaf )\n      return _remove([\n        {\n          text: `Wikipedia`\n          , url: this.isMRCA ? false : `https://en.wikipedia.org/wiki/${this.scientificName}`\n          , image: 'https://3c1703fe8d.site.internapcdn.net/newman/gfx/news/hires/2017/58af0228b8aa8.jpg'\n        }\n        , {\n          text: `Open Tree of Life`\n          , url: `https://tree.opentreeoflife.org/opentree/argus/opentree@${this.leaf.node_id}`\n          , image: 'https://avatars2.githubusercontent.com/u/1752618?s=400&v=4'\n        }\n        , {\n          text: 'NCBI'\n          , url: ncbiId ? `https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id=${ncbiId}` : false\n          , image: 'https://pbs.twimg.com/profile_images/759051827/26243_367877492480_367794192480_4194340_6124010_n_400x400.jpg'\n        }\n        , {\n          text: 'GBIF'\n          , url: gbifId ? `https://www.gbif.org/species/${gbifId}` : false\n          , image: 'https://pbs.twimg.com/profile_images/638655521218785280/XCFoWw5r.jpg'\n        }\n      ], obj => obj.url)\n    }\n  }\n  , components: {\n  }\n  , methods: {\n    nextImage(){\n      let len = this.txnInfo.thumbnail.length\n      this.currentPic = (this.currentPic + 1) % len\n    }\n    , prevImage(){\n      let len = this.txnInfo.thumbnail.length\n      this.currentPic = (this.currentPic - 1 + len) % len\n    }\n    , copyToClipboard( str ){\n      this.$toast.open({\n        message: 'copied ID to clipboard'\n        , type: 'is-info'\n        , position: 'is-top-left'\n      })\n\n      copyToClipboard( str )\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n@import '@/styles/_variables.scss'\n.swiper-container\n  border-radius: 3px\n  background: $black\n  .swiper-button-next,\n  .swiper-button-prev\n    height: 38px\n    top: auto\n    bottom: 0\n    width: 38px\n    margin-top: 0\n    transition: background-color 0.3s ease\n    background: transparentize($black, 0.4)\n    border-radius: 3px\n    color: white\n    text-align: center\n    line-height: 45px\n    &:hover\n      background: transparentize($blue, 0.4)\n.swiper-button-prev\n  left: 0\n.swiper-button-next\n  right: 0\n.image-slide\n  text-align: center\n  max-height: 400px\n  img\n    width: 100%\n    max-width: none\n.media-right\n  position: relative\n  width: 256px\n  .controls\n    position: absolute\n    top: 10px\n    right: 10px\n    z-index: 1\n.tag-list\n  display: flex\n  flex-wrap: wrap\n  .tags\n    flex-wrap: nowrap\n    margin: 0 1em 0 0\n  .rank-tag\n    background: $purple\n    color: lighten($purple, 80)\n.otl-id\n  font-weight: normal\n  font-size: 0.8rem\n  line-height: 1.5\n  font-family: $family-monospace\n.links\n  .card\n    height: 100%\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/taxonomy-info-window.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-half\"},[_c('div',{staticClass:\"otl-id\"},[_c('span',[_vm._v(\"OTL Id: \"+_vm._s(_vm.leaf.node_id)+\" \")]),_c('a',{staticClass:\"has-text-small\",on:{\"click\":function($event){return _vm.copyToClipboard(_vm.leaf.node_id)}}},[_vm._v(\"(copy)\")])]),_c('h1',{staticClass:\"title has-text-dark\"},[_vm._v(_vm._s(_vm.scientificName))]),(_vm.commonName)?_c('h4',{staticClass:\"subtitle\"},[_c('span',{staticClass:\"has-text-grey\"},[_vm._v(\"Commonly known as a \")]),_c('span',{staticClass:\"has-text-success\"},[_vm._v(_vm._s(_vm.commonName))])]):_vm._e(),(!_vm.isMRCA)?_c('div',{staticClass:\"tag-list\"},[(_vm.txnInfo.rank)?_c('div',{staticClass:\"tags has-addons\"},[_c('span',{staticClass:\"tag is-dark\"},[_vm._v(\"Rank\")]),_c('a',{staticClass:\"tag rank-tag\",attrs:{\"href\":_vm.rankLink,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.txnInfo.rank))])]):_vm._e(),(_vm.txnInfo.numDescendants)?_c('div',{staticClass:\"tags has-addons\"},[_c('span',{staticClass:\"tag is-dark\"},[_vm._v(\"Decendants\")]),_c('span',{staticClass:\"tag is-info\",attrs:{\"title\":_vm.txnInfo.numDescendants}},[_vm._v(_vm._s(_vm._f(\"shortNumber\")(_vm.txnInfo.numDescendants)))])]):_vm._e()]):_vm._e(),(_vm.isMRCA)?_c('b-message',{attrs:{\"type\":\"is-info\"}},[_vm._v(\"This is an MRCA node\")]):_vm._e()],1),(_vm.txnInfo.thumbnail && _vm.txnInfo.thumbnail.length)?_c('div',{staticClass:\"column is-half\"},[_c('swiper',{staticClass:\"info-window-swiper\",attrs:{\"options\":_vm.swiperOptions}},[_vm._l((_vm.txnInfo.thumbnail),function(img){return _c('swiper-slide',{key:img},[_c('div',{staticClass:\"image-slide\"},[_c('img',{attrs:{\"src\":img}})])])}),(!_vm.isTouch)?_c('div',{staticClass:\"swiper-button-prev\",attrs:{\"slot\":\"button-prev\"},slot:\"button-prev\"},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\"}})],1):_vm._e(),(!_vm.isTouch)?_c('div',{staticClass:\"swiper-button-next\",attrs:{\"slot\":\"button-next\"},slot:\"button-next\"},[_c('b-icon',{attrs:{\"icon\":\"chevron-right\"}})],1):_vm._e(),_c('div',{staticClass:\"swiper-pagination\",attrs:{\"slot\":\"pagination\"},slot:\"pagination\"})],2)],1):_vm._e()])]),_c('div',{staticClass:\"links\"},[_c('div',{staticClass:\"is-size-5 heading\"},[_vm._v(\"Find more information on...\")]),_c('div',{staticClass:\"columns is-mobile is-multiline\"},_vm._l((_vm.links),function(link){return _c('div',{staticClass:\"column is-one-quarter-tablet is-half-mobile\"},[_c('a',{attrs:{\"href\":link.url,\"target\":\"_blank\"}},[_c('div',{staticClass:\"card clickable\"},[_c('div',{staticClass:\"card-image\"},[_c('figure',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":link.image}})])]),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"content has-text-centered\"},[_vm._v(_vm._s(link.text))])])])])])}),0)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-696249e7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/taxonomy-info-window.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-696249e7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./taxonomy-info-window.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./taxonomy-info-window.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./taxonomy-info-window.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-696249e7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./taxonomy-info-window.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-696249e7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/taxonomy-info-window.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.item(\n  @mousedown.stop=\"\"\n  , :data-ott=\"leaf.node_id\"\n  , :class=\"{ hovering: hovering, 'flap-style': flapStyle, horizontal: horizontal, vertical: !horizontal }\"\n)\n  .card.is-shadowless(\n    v-if=\"isAddedToTree\"\n    , @mouseleave.stop.prevent=\"onMouseLeave\"\n    , @mouseenter.stop.prevent=\"onMouseEnter\"\n    , @touchstart.capture=\"onTouch\"\n  )\n    .card-header.is-shadowless\n      b-tooltip.overlay-btn.cut-btn(label=\"Remove this whole branch\", type=\"is-dark\")\n        .btn(@click=\"$emit('cut', leaf)\")\n          b-icon(icon=\"scissors-cutting\", size=\"is-medium\")\n          b-icon.trash(icon=\"close\", size=\"is-small\")\n      b-tooltip.overlay-btn.descendants-btn(label=\"See descendants\", type=\"is-dark\", slot=\"front-button\")\n        b-dropdown.limit-dropdown(@active-change=\"getSubtree()\", @wheel.native.stop=\"\", :mobile-modal=\"false\")\n          b-icon(icon=\"file-tree\", size=\"is-medium\", slot=\"trigger\")\n          b-loading(:is-full-page=\"false\", :active=\"loading\")\n          b-dropdown-item.heading.has-text-info Descendants\n          b-dropdown-item(v-if=\"children && children.length\")\n            b-field\n              .control\n                .button.is-small(@click=\"$emit('add-node', children.map(n => n.node_id))\")\n                  b-icon(icon=\"expand-all\", size=\"is-small\")\n                  span Expand All\n              .control\n                .button.is-small(@click=\"$emit('remove-node', children.map(n => n.node_id))\")\n                  b-icon(icon=\"collapse-all\", size=\"is-small\")\n                  span Remove All\n          hr.dropdown-divider\n          b-dropdown-item(\n            v-if=\"children && children.length\",\n            v-for=\"child in children\",\n            :class=\"{ 'has-text-grey-light': childIsAdded(child) }\",\n            :key=\"child.node_id\",\n            @click=\"$emit('add-node', child.node_id)\"\n            )\n            | {{ child | nodeName }}\n          b-dropdown-item(v-if=\"!loading && children && !children.length\")\n            | None\n      LeafViewMenu(:common-name=\"commonName\",\n        :scientific-name=\"scientificName\",\n        :flap-style=\"flapStyle\",\n        :short-scientific-name=\"shortScientificName\",\n        :truncate-length=\"commonName ? truncateLength : truncateLength * 2\",\n        :images=\"hideImages ? [] : txnImages\"\n        )\n        b-tooltip.overlay-btn.info-btn(label=\"More Information\", type=\"is-dark\")\n          a.toolbar-control(@click=\"hovering && openInfoWindow()\", @touchstart=\"hovering && openInfoWindow()\")\n            b-icon(icon=\"feature-search\", size=\"is-large\")\n        b-tooltip.overlay-btn.remove-btn(label=\"Remove just this node\", type=\"is-dark\")\n          a.toolbar-control(@click=\"hovering && $emit('remove', leaf.node_id)\", @touchstart=\"hovering && $emit('remove', leaf.node_id)\")\n            b-icon(icon=\"close-network\", size=\"is-large\")\n  .minimal(v-if=\"!isAddedToTree\", @click=\"$emit('add-node', leaf.node_id)\")\n    .card-title {{ (commonName || shortScientificName) | titleCase }}\n    //- .pin-btn\n    //-   b-icon(icon=\"file-plus\", size=\"is-small\")\n</template>\n\n<script>\nimport LeafViewMenu from './leaf-view-menu'\nimport { getTxnInfo, isMRCA } from '@/lib/taxonomy'\nimport { getSubtree } from '@/lib/otol'\nimport TaxonomyInfoWindow from '@/components/taxonomy-info-window'\n\nfunction shortName( str, target ){\n  let words = str.split(' ')\n  let out = str\n  let i = 0\n  while ( out.length > target && i < words.length - 1 ){\n    let word = words[ i ]\n    words[ i ] = `${word[ 0 ]}.`\n    out = words.join(' ')\n    i++\n  }\n  return out\n}\n\n// function isLowerRank( rank = '' ){\n//   return [\n//     'variety'\n//     , 'species'\n//     , 'subspecies'\n//     , 'genus'\n//     , 'subgenus'\n//     , 'family'\n//     , 'subfamily'\n//     , 'class'\n//     , 'subclass'\n//     , 'order'\n//     , 'superorder'\n//   ].indexOf(rank) > -1\n// }\n\nconst interactionHideDelay = 200\n\nexport default {\n  name: 'TOLLeafView'\n  , props: ['leaf', 'truncateLength', 'hideImages', 'flapStyle', 'horizontal']\n  , components: {\n    LeafViewMenu\n  }\n  , filters: {\n    shortName\n  }\n  , data: () => ({\n    txnImages: []\n    , otherCommonNames: []\n    , pin: false\n    , expanded: false\n    , txnInfo: null\n    , children: null\n    , loading: true\n    , hovering: false\n  })\n  , watch: {\n    leaf: {\n      handler( leaf ){\n        if ( !leaf ){ return }\n\n        getTxnInfo( leaf, { thumbSize: 200 } ).then( info => {\n          this.txnInfo = info\n          this.otherCommonNames = info.commonName\n\n          // no images for higher ranks\n          // if ( !isLowerRank(this.txnInfo.rank) ){\n          //   return\n          // }\n\n          if ( info.thumbnail ){\n            let nImages = ['variety', 'species', 'subspecies'].indexOf(this.txnInfo.rank) === -1 ? 2 : 1\n            this.txnImages = info.thumbnail.slice(0, nImages)\n          } else if ( info.pic ){\n            let nImages = ['variety', 'species', 'subspecies'].indexOf(this.txnInfo.rank) === -1 ? 2 : 1\n            this.txnImages = info.pic.slice(0, nImages)\n          }\n        }).catch( ( err ) => this.$emit('error', err) )\n      }\n      , immediate: true\n    }\n  }\n  , computed: {\n    commonName(){\n      if ( this.isMRCA ){ return '' }\n      if ( !this.txnInfo || !this.txnInfo.vernacularNameList ){\n        if ( this.otherCommonNames ){\n          return this.otherCommonNames[0]\n        }\n        return ''\n      }\n      return this.txnInfo.vernacularNameList\n    }\n    , shortScientificName(){\n      return shortName(this.scientificName, this.isMRCA ? 1000 : this.truncateLength)\n    }\n    , scientificName(){\n      if ( !this.txnInfo ){ return '' }\n      return this.txnInfo.canonicalName ||\n        this.txnInfo.name ||\n        this.leaf.node_id || ''\n    }\n    , isMRCA(){\n      return this.leaf && isMRCA(this.leaf)\n    }\n    , isAddedToTree(){\n      return this.childIsAdded( this.leaf )\n    }\n  }\n  , methods: {\n    childIsAdded( child ){\n      if ( !this.$route.query.ids ){ return false }\n      return this.$route.query.ids.indexOf( child.node_id ) > -1\n    }\n    , getSubtree(){\n      if ( this.children ){ return }\n      this.children = []\n      this.loading = true\n\n      if ( !this.leaf ){\n        this.active = false\n        return\n      }\n\n      this.active = true\n\n      getSubtree( this.leaf.node_id ).then( children => {\n        this.children = this.children.concat(children)\n        this.loading = false\n      }).catch( e => console.error(e) )\n    }\n    , openInfoWindow(){\n      this.$modal.open({\n        parent: this\n        , component: TaxonomyInfoWindow\n        , props: {\n          leaf: this.leaf\n          , txnInfo: this.txnInfo\n        }\n        , hasModalCard: false\n      })\n    }\n    , show(){\n      this.hovering = true\n    }\n    , hide(){\n      this.hovering = false\n    }\n    , startTimer( delay ){\n      this.timer = setTimeout(() => this.hide(), delay || interactionHideDelay)\n    }\n    , clearTimer(){\n      clearTimeout( this.timer )\n    }\n    , onTouch( e ){\n      if ( !this.hovering ){\n        e.preventDefault()\n        e.stopImmediatePropagation()\n      }\n\n      this.clearTimer()\n      this.show()\n      this.startTimer( 3000 )\n    }\n    , onMouseLeave( e ){\n      this.startTimer()\n    }\n    , onMouseEnter( e ){\n      setTimeout(() => this.show(), 50)\n      this.clearTimer()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"sass\">\n@import '@/styles/_variables.scss'\n$greyBlue: desaturate(lighten($blue, 20), 50)\n\n.overlay-btn\n  transition: opacity 0.15s ease\n  opacity: 0\n  .hovering &,\n  .tour-hover &\n    opacity: 1\n.cut-btn,\n.descendants-btn\n  position: absolute\n  color: $yellow\n  cursor: pointer\n  &:active\n    color: $blue\n.cut-btn\n  .icon\n    overflow: hidden\n    height: 26px\n    padding-top: 6px\n  .horizontal &\n    left: -36px\n    top: 9px\n  .vertical &\n    left: calc(50% - 2px)\n    top: -32px\n    .icon\n      transform: rotate(90deg)\n  .vertical.flap-style &\n    top: -54px\n  .icon.trash\n    display: block\n    position: relative\n    bottom: 25px\n    left: 20px\n    overflow: visible\n    color: lighten($red, 15)\n    .vertical &\n      bottom: 23px\n      left: -1px\n.descendants-btn\n  background: $white\n  .horizontal &\n    right: -35px\n    top: 18px\n  .vertical &\n    left: calc(50% - 1rem)\n    bottom: -2.4em\n    padding-top: 4px\n  .vertical.flap-style &\n    bottom: -56px\n.toolbar-control\n  color: $grey-lighter\n.icon-button\n  color: $white\n  &:hover,\n  .dropdown.is-active &\n    color: lighten($blue, 10)\n.item .remove-btn\n  background: transparentize($red, 0.4)\n  &:hover\n    background: transparentize($red, 0.1)\n\n.minimal\n  position: relative\n  bottom: 1px\n  text-align: center\n  // border: 1px solid $greyBlue\n  // border-radius: 3px\n  // background: $greyBlue\n  cursor: pointer\n\n  .vertical &\n    bottom: -25px\n\n  .card-title\n    display: inline-block\n    background: $white\n    color: lighten($grey, 12)\n    padding: 0 1rem\n    transition: color 0.15s ease\n\n  &:hover .card-title\n    color: $blue\n\n  // .common-name\n  //   padding-right: 24px\n  .pin-btn\n    position: absolute\n    top: 0\n    right: 0\n    width: 24px\n    height: 24px\n    text-align: center\n    background: $greyBlue\n    color: $white\n    border: 1px solid $white\n    border-radius: 50%\n    line-height: 24px\n    padding-left: 1px\n    cursor: pointer\n  &:hover .pin-btn\n    border-color: $greyBlue\n    background-color: $white\n    color: $grey-darker\n  &:active .pin-btn\n    top: 1px\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tol-leaf-view/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item\",class:{ hovering: _vm.hovering, 'flap-style': _vm.flapStyle, horizontal: _vm.horizontal, vertical: !_vm.horizontal },attrs:{\"data-ott\":_vm.leaf.node_id},on:{\"mousedown\":function($event){$event.stopPropagation();}}},[(_vm.isAddedToTree)?_c('div',{staticClass:\"card is-shadowless\",on:{\"mouseleave\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onMouseLeave($event)},\"mouseenter\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onMouseEnter($event)},\"!touchstart\":function($event){return _vm.onTouch($event)}}},[_c('div',{staticClass:\"card-header is-shadowless\"},[_c('b-tooltip',{staticClass:\"overlay-btn cut-btn\",attrs:{\"label\":\"Remove this whole branch\",\"type\":\"is-dark\"}},[_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$emit('cut', _vm.leaf)}}},[_c('b-icon',{attrs:{\"icon\":\"scissors-cutting\",\"size\":\"is-medium\"}}),_c('b-icon',{staticClass:\"trash\",attrs:{\"icon\":\"close\",\"size\":\"is-small\"}})],1)]),_c('b-tooltip',{staticClass:\"overlay-btn descendants-btn\",attrs:{\"slot\":\"front-button\",\"label\":\"See descendants\",\"type\":\"is-dark\"},slot:\"front-button\"},[_c('b-dropdown',{staticClass:\"limit-dropdown\",attrs:{\"mobile-modal\":false},on:{\"active-change\":function($event){return _vm.getSubtree()}},nativeOn:{\"wheel\":function($event){$event.stopPropagation();}}},[_c('b-icon',{attrs:{\"slot\":\"trigger\",\"icon\":\"file-tree\",\"size\":\"is-medium\"},slot:\"trigger\"}),_c('b-loading',{attrs:{\"is-full-page\":false,\"active\":_vm.loading}}),_c('b-dropdown-item',{staticClass:\"heading has-text-info\"},[_vm._v(\"Descendants\")]),(_vm.children && _vm.children.length)?_c('b-dropdown-item',[_c('b-field',[_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"button is-small\",on:{\"click\":function($event){_vm.$emit('add-node', _vm.children.map(function (n) { return n.node_id; }))}}},[_c('b-icon',{attrs:{\"icon\":\"expand-all\",\"size\":\"is-small\"}}),_c('span',[_vm._v(\"Expand All\")])],1)]),_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"button is-small\",on:{\"click\":function($event){_vm.$emit('remove-node', _vm.children.map(function (n) { return n.node_id; }))}}},[_c('b-icon',{attrs:{\"icon\":\"collapse-all\",\"size\":\"is-small\"}}),_c('span',[_vm._v(\"Remove All\")])],1)])])],1):_vm._e(),_c('hr',{staticClass:\"dropdown-divider\"}),_vm._l((_vm.children),function(child){return (_vm.children && _vm.children.length)?_c('b-dropdown-item',{key:child.node_id,class:{ 'has-text-grey-light': _vm.childIsAdded(child) },on:{\"click\":function($event){return _vm.$emit('add-node', child.node_id)}}},[_vm._v(_vm._s(_vm._f(\"nodeName\")(child)))]):_vm._e()}),(!_vm.loading && _vm.children && !_vm.children.length)?_c('b-dropdown-item',[_vm._v(\"None\")]):_vm._e()],2)],1),_c('LeafViewMenu',{attrs:{\"common-name\":_vm.commonName,\"scientific-name\":_vm.scientificName,\"flap-style\":_vm.flapStyle,\"short-scientific-name\":_vm.shortScientificName,\"truncate-length\":_vm.commonName ? _vm.truncateLength : _vm.truncateLength * 2,\"images\":_vm.hideImages ? [] : _vm.txnImages}},[_c('b-tooltip',{staticClass:\"overlay-btn info-btn\",attrs:{\"label\":\"More Information\",\"type\":\"is-dark\"}},[_c('a',{staticClass:\"toolbar-control\",on:{\"click\":function($event){_vm.hovering && _vm.openInfoWindow()},\"touchstart\":function($event){_vm.hovering && _vm.openInfoWindow()}}},[_c('b-icon',{attrs:{\"icon\":\"feature-search\",\"size\":\"is-large\"}})],1)]),_c('b-tooltip',{staticClass:\"overlay-btn remove-btn\",attrs:{\"label\":\"Remove just this node\",\"type\":\"is-dark\"}},[_c('a',{staticClass:\"toolbar-control\",on:{\"click\":function($event){_vm.hovering && _vm.$emit('remove', _vm.leaf.node_id)},\"touchstart\":function($event){_vm.hovering && _vm.$emit('remove', _vm.leaf.node_id)}}},[_c('b-icon',{attrs:{\"icon\":\"close-network\",\"size\":\"is-large\"}})],1)])],1)],1)]):_vm._e(),(!_vm.isAddedToTree)?_c('div',{staticClass:\"minimal\",on:{\"click\":function($event){return _vm.$emit('add-node', _vm.leaf.node_id)}}},[_c('div',{staticClass:\"card-title\"},[_vm._v(_vm._s(_vm._f(\"titleCase\")((_vm.commonName || _vm.shortScientificName))))])]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0d79f9ee\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tol-leaf-view/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0d79f9ee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0d79f9ee\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0d79f9ee\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tol-leaf-view/index.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.mrca-item\n  .item-title\n    span(v-if=\"loading\") ...\n    .names(v-if=\"!loading\")\n      .common-name {{ commonName | capitalize | truncate(24) }}\n      .scientific-name {{ scientificName | capitalize | truncate(24) }}\n</template>\n\n<script>\nimport { getTxnInfo } from '@/lib/taxonomy'\n\nexport default {\n  name: 'TOLMRCAView'\n  , props: ['leaf']\n  , components: {\n\n  }\n  , data: () => ({\n    leafData: null\n    , txnInfo: null\n    , loading: true\n  })\n  , watch: {\n    leaf: {\n      handler( leaf ){\n        if ( !leaf ){ return }\n\n        getTxnInfo( leaf ).then( leaf => {\n          this.txnInfo = leaf.txnInfo\n        }).catch( ( err ) =>\n          this.$emit('error', err)\n        ).finally( () => (this.loading = false) )\n      }\n      , immediate: true\n    }\n  }\n  , computed: {\n    commonName(){\n      if ( !this.txnInfo ){ return '' }\n      return this.txnInfo.vernacularNameList\n    }\n    , scientificName(){\n      if ( !this.txnInfo ){ return '' }\n      return this.txnInfo.canonicalName ||\n        this.leaf.taxon ? this.leaf.taxon.name : this.leaf.node_id\n    }\n  }\n  , methods: {\n  }\n}\n</script>\n\n<style scoped lang=\"sass\">\n@import '@/styles/_variables.scss'\n.item-title\n  text-align: center\n  background: $white\n.icon-button\n  color: $white\n  &:hover,\n  .dropdown.is-active &\n    color: lighten($blue, 10)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tol-mrca-view/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mrca-item\"},[_c('div',{staticClass:\"item-title\"},[(_vm.loading)?_c('span',[_vm._v(\"...\")]):_vm._e(),(!_vm.loading)?_c('div',{staticClass:\"names\"},[_c('div',{staticClass:\"common-name\"},[_vm._v(_vm._s(_vm._f(\"truncate\")(_vm._f(\"capitalize\")(_vm.commonName),24)))]),_c('div',{staticClass:\"scientific-name\"},[_vm._v(_vm._s(_vm._f(\"truncate\")(_vm._f(\"capitalize\")(_vm.scientificName),24)))])]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ac34044\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tol-mrca-view/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ac34044\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ac34044\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ac34044\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tol-mrca-view/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a52bee48\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./node.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./node.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./node.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/node.vue\n// module id = null\n// module chunks = ","<script>\n// import VueMixinTween from 'vue-mixin-tween'\n// import TWEEN from '@tweenjs/tween.js'\nexport default {\n  name: 'Node'\n  // , functional: true\n  , inject: [ 'svg' ]\n  , props: [ 'tree', 'x', 'y' ]\n  , data: () => ({\n\n  })\n  , mixins: [\n    // VueMixinTween('x', 700, TWEEN.Easing.Quadratic.InOut)\n    // , VueMixinTween('y', 700, TWEEN.Easing.Quadratic.InOut)\n  ]\n  , beforeDestroy(){\n    this.node.off( 'click' )\n    this.node.remove()\n  }\n  , beforeMount(){\n    let nodeWidth = 36\n    let scene = this.svg\n    this.node = scene.group().addClass('svg-node').move( 0, 0 )\n\n    this.node.rect(nodeWidth, nodeWidth).center(6, -6).radius(7)\n    this.node.rect(nodeWidth, nodeWidth).center(3, -3).radius(7)\n    this.node.rect(nodeWidth, nodeWidth).center(0, 0).radius(7)\n\n    this.label = this.node.plain( `${this.tree.lineage.length}` ).attr('y', 2)\n\n    this.node.on( 'click', (e) => {\n      e.stopPropagation()\n      this.$emit( 'click', { subtree: this.tree, x: this.x, y: this.y } )\n    })\n  }\n  , render( h ){\n    // this.node.move( this.xTween, this.yTween ).front()\n    this.node.data( 'ott', this.tree.leaf.node_id )\n    this.node.style( 'transform', `translate3d(${this.x}px, ${this.y}px, 0)`).front()\n    this.label.plain( `${this.tree.lineage.length}` )\n    return this.node\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/styles/_variables.scss'\n.svg-node\n  cursor: pointer\n  transition: transform 0.7s ease-in-out\n  rect\n    fill: desaturate(lighten($blue, 20), 50)\n    stroke: white\n    transition: all 0.15s linear\n\n  // circle\n  //   fill: $white\n  //   stroke-width: 2\n  //   stroke: $grey-light\n  //   transition: all 0.15s linear\n\n  text\n    font-size: 20px\n    text-anchor: middle\n    dominant-baseline: middle\n    fill: $white\n    transition: fill 0.15s linear\n\n  &:hover rect\n    fill: $blue\n\n  &:hover text\n    fill: $white\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/node.vue","<script>\nconst width = 40\nconst thickness = 40\nexport default {\n  name: 'AncestorCollapse'\n  , inject: [ 'svg' ]\n  , props: [ 'tree', 'x', 'y', 'horizontal' ]\n  , data: () => ({\n\n  })\n  , watch: {\n    horizontal: 'drawDots'\n  }\n  , beforeDestroy(){\n    this.node.off( 'click' )\n    this.node.remove()\n  }\n  , beforeMount(){\n    let scene = this.svg\n    this.node = scene.group().addClass('svg-ancestor-collapse').move( 0, 0 )\n\n    this.node.rect(width, thickness).center(0, 0).radius( 7 )\n\n    this.dots = this.node.group()\n    this.drawDots()\n\n    this.label = this.node.plain( `${this.tree.lineage.length}` )\n\n    this.node.on( 'click', (e) => {\n      e.stopPropagation()\n      this.$emit( 'click', { subtree: this.tree, x: this.x, y: this.y } )\n    })\n  }\n  , methods: {\n    drawDots(){\n      this.dots.clear()\n      if ( this.horizontal ){\n        this.dots.circle(3).center(width / 5, 0)\n        this.dots.circle(3).center(0, 0)\n        this.dots.circle(3).center(-width / 5, 0)\n      } else {\n        this.dots.circle(3).center(0, width / 5)\n        this.dots.circle(3).center(0, 0)\n        this.dots.circle(3).center(0, -width / 5)\n      }\n    }\n  }\n  , render( h ){\n    this.node.data( 'ott', this.tree.leaf.node_id )\n\n    if ( this.horizontal ){\n      this.node.addClass('horizontal')\n    } else {\n      this.node.removeClass('horizontal')\n    }\n\n    this.node.style( 'transform', `translate3d(${this.x}px, ${this.y}px, 0)`).front()\n\n    if ( this.horizontal ){\n      this.label.attr('x', 0).attr('y', -14)\n    } else {\n      this.label.attr('x', -10).attr('y', 1.5)\n    }\n\n    this.label.plain( `${this.tree.lineage.length}` )\n    return this.node\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/styles/_variables.scss'\n$mutedBlue: hsl(208, 40%, 75%)\n.svg-ancestor-collapse\n  cursor: pointer\n  // transition: transform 0.7s ease-in-out\n  rect\n    fill: white\n    stroke: white\n    transition: all 0.15s linear\n\n  circle\n    fill: $mutedBlue\n    transition: all 0.15s linear\n\n  // circle\n  //   fill: $white\n  //   stroke-width: 2\n  //   stroke: $grey-light\n  //   transition: all 0.15s linear\n\n  text\n    font-size: 16px\n    text-anchor: end\n    dominant-baseline: middle\n    fill: $mutedBlue\n    transition: fill 0.15s linear\n\n  &.horizontal text\n    text-anchor: middle\n\n  &:hover circle\n    fill: $blue\n\n  &:hover text\n    fill: $blue\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/ancestor-collapse.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ed72c37e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ancestor-collapse.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ancestor-collapse.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ancestor-collapse.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/ancestor-collapse.vue\n// module id = null\n// module chunks = ","<script>\nimport { getTxnInfo, isMRCA } from '@/lib/taxonomy'\nexport default {\n  name: 'CondensedNode'\n  // , functional: true\n  , inject: [ 'svg' ]\n  , props: [ 'leaf', 'x', 'y', 'horizontal' ]\n  , data: () => ({\n    txnInfo: null\n    , otherCommonNames: []\n    , loading: false\n  })\n  , watch: {\n    leaf: {\n      handler( leaf ){\n        if ( !leaf ){ return }\n\n        getTxnInfo( leaf, { images: false } ).then( info => {\n          this.txnInfo = info\n          this.otherCommonNames = info.commonName\n        }).catch( ( err ) => this.$emit('error', err) )\n      }\n      , immediate: true\n    }\n  }\n  , computed: {\n    commonName(){\n      if ( this.isMRCA ){ return '' }\n      if ( !this.txnInfo || !this.txnInfo.vernacularNameList ){\n        if ( this.otherCommonNames ){\n          return this.otherCommonNames[0] || ''\n        }\n        return ''\n      }\n      return this.txnInfo.vernacularNameList\n    }\n    , scientificName(){\n      if ( !this.txnInfo ){ return '' }\n      return this.txnInfo.canonicalName ||\n        this.txnInfo.name ||\n        this.leaf.node_id || ''\n    }\n    , isMRCA(){\n      return this.leaf && isMRCA(this.leaf)\n    }\n  }\n  , beforeDestroy(){\n    this.node.off( 'click' )\n    this.node.remove()\n  }\n  , beforeMount(){\n    let scene = this.svg\n    this.node = scene.group().addClass('svg-condensed-node').move( 0, 0 )\n\n    this.node.circle(10).center(0, 0)\n\n    this.label = this.node.plain( '...' )\n\n    this.node.on( 'click', (e) => {\n      e.stopPropagation()\n      this.$emit( 'click', { leaf: this.leaf, x: this.x, y: this.y } )\n    })\n  }\n  , render( h ){\n    // this.node.move( this.xTween, this.yTween ).front()\n    this.node.style( 'transform', `translate3d(${this.x}px, ${this.y}px, 0)`).front()\n    if ( this.horizontal ){\n      this.label.removeClass('vertical')\n    } else {\n      this.label.addClass('vertical')\n    }\n    if ( this.commonName ){\n      this.label.plain( `${this.commonName}` )\n    } else {\n      this.label.plain( `(${this.scientificName})` )\n    }\n    return this.node\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/styles/_variables.scss'\n.svg-condensed-node\n  cursor: zoom-in\n  transition: transform 0.7s ease-in-out\n  circle\n    fill: desaturate(lighten($blue, 20), 50)\n    // stroke: white\n    transition: all 0.15s linear\n\n  text\n    font-family: $family-monospace\n    font-size: 16px\n    text-anchor: left\n    dominant-baseline: middle\n    fill: darken($blue, 15)\n    transition: fill 0.15s linear\n\n    transform: translateX(12px)\n\n    &.vertical\n      transform: rotateZ(90deg) translateX(12px)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/condensed-node.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c8e4ae98\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./condensed-node.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./condensed-node.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./condensed-node.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/condensed-node.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-30005c28\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tail.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/tail.vue\n// module id = null\n// module chunks = ","<script>\nexport default {\n  name: 'Node'\n  // , functional: true\n  , inject: [ 'svg' ]\n  , props: [ 'leaf', 'x', 'y' ]\n  , data: () => ({\n\n  })\n  , beforeDestroy(){\n    this.tail.off( 'click' )\n    this.tail.remove()\n  }\n  , beforeMount(){\n    let tailRadius = 15\n    let scene = this.svg\n    this.tail = scene.group().addClass('svg-tail').move( this.x, this.y )\n    this.tail.circle(2 * tailRadius).center(0, 0)\n\n    // this.label = this.tail.plain( `${this.tree.lineage.length}` ).attr('y', 2)\n\n    this.tail.on( 'click', (e) => {\n      e.stopPropagation()\n      this.$emit( 'click', { tail: this.tail, leaf: this.leaf, x: this.x, y: this.y } )\n    })\n  }\n  , render( h ){\n    this.tail.move( this.x, this.y ).front()\n    // this.label.plain( `${this.tree.lineage.length}` )\n    return this.tail\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/styles/_variables.scss'\n.svg-tail\n  cursor: pointer\n\n  circle\n    fill: $white-ter\n    stroke-width: 2\n    stroke: $grey-light\n    transition: all 0.15s linear\n\n  text\n    font-size: 20px\n    text-anchor: middle\n    dominant-baseline: middle\n    fill: $grey-darker\n    transition: fill 0.15s linear\n\n  &:hover circle\n    fill: $cyan\n    stroke: $cyan\n\n  &:hover text\n    fill: $white\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/tail.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0c654284\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./connection.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./connection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./connection.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/connection.vue\n// module id = null\n// module chunks = ","<script>\n// import VueMixinTween from 'vue-mixin-tween'\n// import TWEEN from '@tweenjs/tween.js'\nexport default {\n  name: 'Connection'\n  , inject: [ 'svg' ]\n  , props: [ 'x1', 'y1', 'x2', 'y2', 'padding', 'horizontal' ]\n  , data: () => ({\n  })\n  , mixins: [\n    // VueMixinTween('x1', 700, TWEEN.Easing.Quadratic.InOut)\n    // , VueMixinTween('y1', 700, TWEEN.Easing.Quadratic.InOut)\n    // , VueMixinTween('x2', 700, TWEEN.Easing.Quadratic.InOut)\n    // , VueMixinTween('y2', 700, TWEEN.Easing.Quadratic.InOut)\n  ]\n  , beforeDestroy(){\n    this.node.remove()\n  }\n  , beforeMount(){\n    let scene = this.svg\n    this.node = scene.polyline([]).addClass('svg-connection')\n  }\n  , render( h ){\n    this.plot()\n    return this.node\n  }\n  , methods: {\n    plot(){\n      let spacing = this.padding\n      let x1 = this.x1\n      let y1 = this.y1\n      let x2 = this.x2\n      let y2 = this.y2\n      let line\n\n      if ( this.horizontal ){\n        line = [\n          [ x1, y1 ]\n          , [ x1 + spacing, y1 ]\n          , [ x1 + spacing, y2 ]\n          , [ x2, y2 ]\n        ]\n      } else {\n        line = [\n          [ x1, y1 ]\n          , [ x1, y1 + spacing ]\n          , [ x2, y1 + spacing ]\n          , [ x2, y2 ]\n        ]\n      }\n\n      this.node.plot( line ).back()\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/styles/_variables.scss'\n.svg-connection\n  fill: none\n  stroke-width: 3\n  stroke: hsl(208, 40%, 75%)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/connection.vue","<template lang=\"pug\">\n.child-menu.dropdown(:style=\"{ transform: `translate(${x}px, ${y}px)`}\", :class=\"{ 'is-active': active }\")\n  .dropdown-menu\n    .dropdown-content\n      b-loading(:is-full-page=\"false\", :active=\"loading\")\n      .dropdown-item.heading.has-text-info Children\n      .dropdown-divider\n      a.dropdown-item(v-if=\"children.length\", v-for=\"child in children\", @click=\"$emit('select', child)\")\n        | {{ child.taxon ? child.taxon.name : child.node_id }}\n      .dropdown-item(v-if=\"!loading && !children.length\")\n        | None\n</template>\n\n<script>\nimport { getSubtree } from '@/lib/otol'\n\nexport default {\n  name: 'ChildMenu'\n  , props: {\n    'leaf': Object\n    , 'x': Number\n    , 'y': Number\n  }\n  , data: () => ({\n    children: []\n    , loading: false\n    , active: false\n  })\n  , watch: {\n    leaf(){\n      this.children = []\n      this.loading = true\n\n      if ( !this.leaf ){\n        this.active = false\n        return\n      }\n\n      this.active = true\n\n      getSubtree( this.leaf.node_id ).then( children => {\n        this.children = this.children.concat(children)\n        this.loading = false\n      }).catch( e => console.error(e) )\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.child-menu {\n  position: absolute;\n  top: 0;\n  left: 0;\n  .dropdown-menu {\n    position: relative;\n    top: 20px;\n    left: -50%;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/child-menu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"child-menu dropdown\",class:{ 'is-active': _vm.active },style:({ transform: (\"translate(\" + _vm.x + \"px, \" + _vm.y + \"px)\")})},[_c('div',{staticClass:\"dropdown-menu\"},[_c('div',{staticClass:\"dropdown-content\"},[_c('b-loading',{attrs:{\"is-full-page\":false,\"active\":_vm.loading}}),_c('div',{staticClass:\"dropdown-item heading has-text-info\"},[_vm._v(\"Children\")]),_c('div',{staticClass:\"dropdown-divider\"}),_vm._l((_vm.children),function(child){return (_vm.children.length)?_c('a',{staticClass:\"dropdown-item\",on:{\"click\":function($event){return _vm.$emit('select', child)}}},[_vm._v(_vm._s(child.taxon ? child.taxon.name : child.node_id))]):_vm._e()}),(!_vm.loading && !_vm.children.length)?_c('div',{staticClass:\"dropdown-item\"},[_vm._v(\"None\")]):_vm._e()],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-614f94a0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tree/child-menu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-614f94a0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./child-menu.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./child-menu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./child-menu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-614f94a0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./child-menu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-614f94a0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/child-menu.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.tree\n  //- ChildMenu(:leaf=\"subtreeLeaf\", :x=\"childMenuX\", :y=\"childMenuY\", @select=\"$emit('add-node', arguments[0])\")\n  //- .lvl(v-for=\"level in columns\")\n  //-   .col(v-for=\"col in level\")\n  //-     template(v-if=\"!col\")\n  //-       .spacer\n  //-     .tol-col(v-if=\"col\")\n  //-       .box {{ col.tree.lineage.length }}\n  //-       TOLNodeCard(\n  //-         v-if=\"col.tree.leaf\"\n  //-         , :leaf=\"col.tree.leaf\"\n  //-       )\n  template(v-if=\"compactView\")\n    .tol-leaf(\n      v-for=\"branch in branches\"\n      , :class=\"{ 'horizontal': horizontal }\"\n      , :style=\"{ left: `${branch.x + branch.dx}px`, top: `${branch.y + branch.dy}px` }\"\n      , :tabindex=\"-1\"\n      )\n      Connection(v-if=\"!(branch.isRoot && !branch.tree.lineage.length)\", :horizontal=\"horizontal\", :x1=\"branch.px\", :y1=\"branch.py\", :x2=\"branch.x + branch.dx\", :y2=\"branch.y + branch.dy\", :padding=\"branch.dx || branch.dy\")\n      CondensedNode(v-if=\"!branch.tree.split.length\", :leaf=\"branch.tree.leaf\", :x=\"branch.x + branch.dx\", :y=\"branch.y\", :horizontal=\"horizontal\", @click=\"$emit('zoom-in', arguments[0])\")\n\n  transition-group(name=\"tree\", v-if=\"!compactView\", :css=\"transitions\")\n    .tol-leaf(\n      v-for=\"branch in branches\"\n      , :class=\"{ 'horizontal': horizontal }\"\n      , :key=\"branch.key\"\n      , :style=\"{ left: `${branch.x-(horizontal ? 0 : 0.5 * cardWidth) + branch.dx}px`, top: `${branch.y-(horizontal ? 0.5 * cardHeight : 0) + branch.dy}px`, width: cardWidth + 'px', height: cardHeight + 'px' }\"\n      , :tabindex=\"-1\"\n      , :data-ott=\"branch.tree.leaf.node_id\"\n      )\n      Connection(v-if=\"!(branch.isRoot && !branch.tree.lineage.length)\", :horizontal=\"horizontal\", :x1=\"branch.px\", :y1=\"branch.py\", :x2=\"branch.x + branch.dx\", :y2=\"branch.y + branch.dy\", :padding=\"(horizontal ? cardWidth : cardHeight) * 1.7\")\n      //- Node(v-if=\"branch.tree.lineage.length\", :tree=\"branch.tree\", :x=\"branch.x\", :y=\"branch.y\", @click=\"$emit('leaf-click', arguments[0])\")\n      AncestorCollapse(v-if=\"branch.tree.lineage.length\", :tree=\"branch.tree\", :x=\"branch.x\", :y=\"branch.y\", :horizontal=\"horizontal\", @click=\"$emit('leaf-click', arguments[0])\")\n\n      TOLLeafView(\n        :leaf=\"branch.tree.leaf\"\n        , :truncate-length=\"truncateLength\"\n        , :hide-images=\"hideImages\"\n        , :flap-style=\"flapStyle\"\n        , :horizontal=\"horizontal\"\n        , @remove=\"$emit( 'remove', branch.tree.leaf )\"\n        , @cut=\"$emit( 'cut', branch.tree )\"\n        , @error=\"$emit( 'error', arguments[0] )\"\n        , @add-node=\"$emit( 'add-node', arguments[0] )\"\n        , @remove-node=\"$emit( 'remove', arguments[0] )\"\n        )\n</template>\n\n<script>\nimport TOLLeafView from '@/components/tol-leaf-view'\nimport TOLMRCAView from '@/components/tol-mrca-view'\nimport Node from './node'\nimport AncestorCollapse from './ancestor-collapse'\nimport CondensedNode from './condensed-node'\nimport Tail from './tail'\nimport Connection from './connection'\nimport ChildMenu from './child-menu'\nimport _flatten from 'lodash/flatten'\n\nfunction getBranches( tree, opts, x = 0, y = 0, level = 0 ){\n\n  let hz = opts.horizontal\n  let height = opts.cardHeight\n  let nodeContainerSize = 0.5 * (hz ? height : opts.cardWidth) + opts.padding\n  let count = tree.nTips\n  let colstart = -(count - 1)\n  let branchSpacing = opts.branchSpacing\n  let branches = []\n\n  branches.push({\n    tree\n    , x\n    , y\n    , px: opts.px === undefined ? x : opts.px\n    , py: opts.py === undefined ? y : opts.py\n    , key: (tree.leaf.node_id || tree.leaf)\n    , dx: hz ? nodeContainerSize : 0\n    , dy: hz ? 0 : 0.75 * height\n    , isRoot: level === 0\n    , hasSplit: !!tree.split.length\n  })\n\n  if ( !tree.split.length ){\n    return branches\n  }\n\n  branches = branches.concat(\n    _flatten(\n      tree.split.map( (subtree, idx) => {\n        let col = subtree.nTips - 1\n        var xpos, ypos\n\n        if ( hz ){\n          xpos = x + branchSpacing + 1.3 * opts.cardWidth\n          ypos = y + (col + colstart) * nodeContainerSize\n        } else {\n          xpos = x + (col + colstart) * nodeContainerSize\n          ypos = y + branchSpacing + 1.3 * height\n        }\n\n        colstart = 2 * col + colstart + 2\n\n        return getBranches( subtree, {...opts, px: x, py: y}, xpos, ypos, level + 1 )\n      })\n    )\n  )\n\n  return branches\n}\n\nfunction appendToColumns( tree, columns, colOffset = 0, level = 0 ){\n  let colIndex = colOffset + tree.nTips - 1\n  let row = columns[ level ]\n  row[ colIndex ] = {\n    tree\n    , key: (tree.leaf ? tree.leaf.node_id : tree.lineage[0].node_id + level)\n    , isRoot: level === 0\n    , hasSplit: !!tree.split\n  }\n\n  if ( !tree.split ){\n    return columns\n  }\n\n  tree.split.forEach( (subtree, idx) => {\n    appendToColumns( subtree, columns, colOffset, level + 1 )\n    colOffset += subtree.nTips * 2\n  })\n\n  return columns\n}\n\nfunction getColumns( tree ){\n  // const nCols = tree.nTips * 2 - 1\n  const columns = Array( tree.depth ).fill(0).map(a => [])\n  appendToColumns( tree, columns )\n  return columns\n}\n\nexport default {\n  name: 'Tree'\n  , props: {\n    'tree': Object\n    , 'x': Number\n    , 'y': Number\n    , 'px': Number\n    , 'py': Number\n    , 'cardWidth': Number\n    , 'cardHeight': Number\n    , 'padding': Number\n    , 'branchSpacing': Number\n    , 'horizontal': Boolean\n    , 'flapStyle': Boolean\n    , 'hide-images': Boolean\n    , 'computedBranches': null\n    , 'compactView': Boolean\n    , 'transitions': {\n      type: Boolean\n      , default: true\n    }\n  }\n  , data: () => ({\n    subtreeLeaf: null\n    , childMenuX: 0\n    , childMenuY: 0\n  })\n  , components: {\n    Connection\n    , ChildMenu\n    , Node\n    , AncestorCollapse\n    , CondensedNode\n    , Tail\n    , TOLLeafView\n    , TOLMRCAView\n  }\n  , created () {\n    document.addEventListener('click', this.onDocumentClick)\n  }\n  , destroyed () {\n    // important to clean up!!\n    document.removeEventListener('click', this.onDocumentClick)\n  }\n  , computed: {\n    branches(){\n      let tree = this.tree\n      let x = this.x\n      let y = this.y\n      let b = getBranches(tree, {\n        cardWidth: this.compactView ? 0 : this.cardWidth\n        , cardHeight: this.compactView ? 0 : this.cardHeight\n        , branchSpacing: this.compactView ? 40 : this.branchSpacing\n        , padding: this.compactView ? 10 : this.padding\n        , horizontal: this.horizontal\n      }, x, y)\n      this.$emit('update:computedBranches', b)\n      return b\n    }\n\n    , columns(){\n      let tree = this.tree\n      let cols = getColumns( tree )\n      return cols\n    }\n\n    , truncateLength(){\n      return this.cardWidth / 9 | 0\n    }\n  }\n  , methods: {\n    openChildMenu({ x, y, leaf }){\n      this.childMenuX = x\n      this.childMenuY = y\n      this.subtreeLeaf = leaf\n    }\n    , onDocumentClick(){\n      this.subtreeLeaf = null\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/_variables.scss';\n.child-menu {\n  position: absolute;\n  top: 0;\n  left: 0;\n  .dropdown-menu {\n    position: relative;\n    top: 20px;\n    left: -50%;\n  }\n}\n.lvl {\n  display: flex;\n  align-items: flex-start;\n  .col {\n    display: block;\n    margin: 0 -60px;\n    width: 260px;\n\n    &:first-child {\n      margin-left: 0;\n    }\n\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n\n  .spacer {\n    height: 100px;\n  }\n}\n.tol-leaf {\n  position: absolute;\n  top: 0;\n  left: 0;\n  outline: none;\n\n  &.horizontal {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  &:hover,\n  &:active,\n  &:focus {\n    z-index: 1;\n  }\n\n  .card {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n}\n.tree-move {\n  transition: all 0.7s ease-in-out;\n}\n.tree-enter-active, .tree-leave-active {\n  transition: all 0.7s ease-in-out;\n}\n.tree-enter, .tree-leave-to {\n  transition: all 0.7s ease-in-out;\n  opacity: 0;\n  top: -80px;\n}\n.simple {\n  background: $white;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/tree-display.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree\"},[(_vm.compactView)?_vm._l((_vm.branches),function(branch){return _c('div',{staticClass:\"tol-leaf\",class:{ 'horizontal': _vm.horizontal },style:({ left: ((branch.x + branch.dx) + \"px\"), top: ((branch.y + branch.dy) + \"px\") }),attrs:{\"tabindex\":-1}},[(!(branch.isRoot && !branch.tree.lineage.length))?_c('Connection',{attrs:{\"horizontal\":_vm.horizontal,\"x1\":branch.px,\"y1\":branch.py,\"x2\":branch.x + branch.dx,\"y2\":branch.y + branch.dy,\"padding\":branch.dx || branch.dy}}):_vm._e(),(!branch.tree.split.length)?_c('CondensedNode',{attrs:{\"leaf\":branch.tree.leaf,\"x\":branch.x + branch.dx,\"y\":branch.y,\"horizontal\":_vm.horizontal},on:{\"click\":function($event){return _vm.$emit('zoom-in', arguments[0])}}}):_vm._e()],1)}):_vm._e(),(!_vm.compactView)?_c('transition-group',{attrs:{\"name\":\"tree\",\"css\":_vm.transitions}},_vm._l((_vm.branches),function(branch){return _c('div',{key:branch.key,staticClass:\"tol-leaf\",class:{ 'horizontal': _vm.horizontal },style:({ left: ((branch.x-(_vm.horizontal ? 0 : 0.5 * _vm.cardWidth) + branch.dx) + \"px\"), top: ((branch.y-(_vm.horizontal ? 0.5 * _vm.cardHeight : 0) + branch.dy) + \"px\"), width: _vm.cardWidth + 'px', height: _vm.cardHeight + 'px' }),attrs:{\"tabindex\":-1,\"data-ott\":branch.tree.leaf.node_id}},[(!(branch.isRoot && !branch.tree.lineage.length))?_c('Connection',{attrs:{\"horizontal\":_vm.horizontal,\"x1\":branch.px,\"y1\":branch.py,\"x2\":branch.x + branch.dx,\"y2\":branch.y + branch.dy,\"padding\":(_vm.horizontal ? _vm.cardWidth : _vm.cardHeight) * 1.7}}):_vm._e(),(branch.tree.lineage.length)?_c('AncestorCollapse',{attrs:{\"tree\":branch.tree,\"x\":branch.x,\"y\":branch.y,\"horizontal\":_vm.horizontal},on:{\"click\":function($event){return _vm.$emit('leaf-click', arguments[0])}}}):_vm._e(),_c('TOLLeafView',{attrs:{\"leaf\":branch.tree.leaf,\"truncate-length\":_vm.truncateLength,\"hide-images\":_vm.hideImages,\"flap-style\":_vm.flapStyle,\"horizontal\":_vm.horizontal},on:{\"remove\":function($event){return _vm.$emit( 'remove', branch.tree.leaf )},\"cut\":function($event){return _vm.$emit( 'cut', branch.tree )},\"error\":function($event){return _vm.$emit( 'error', arguments[0] )},\"add-node\":function($event){return _vm.$emit( 'add-node', arguments[0] )},\"remove-node\":function($event){return _vm.$emit( 'remove', arguments[0] )}}})],1)}),0):_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-720d7fba\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tree/tree-display.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-720d7fba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tree-display.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tree-display.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tree-display.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-720d7fba\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./tree-display.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-720d7fba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/tree-display.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.tree-canvas(ref=\"wrapper\")\n  .svg(ref=\"svg\")\n  .slot(:style=\"{ transform: `translate3d(${left}px, ${top}px, 0)` }\")\n    slot\n</template>\n\n<script>\nimport PubSub from '@/lib/pubsub'\nimport SVG from 'svg.js'\nimport Impetus from 'impetus'\nimport TWEEN from '@tweenjs/tween.js'\nimport _debounce from 'lodash/debounce'\n\n// var isTouch = false\n// window.addEventListener('touchstart', function firstTouch(){\n//   isTouch = true\n//   window.removeEventListener('touchstart', firstTouch)\n// }, false)\n\nfunction clamp( v, min, max ){\n  return Math.min(Math.max(v, min), max)\n}\n\n// Setup the animation loop.\nrequestAnimationFrame(function animate(time) {\n  requestAnimationFrame(animate)\n  TWEEN.update(time)\n})\n\nexport default {\n  name: 'TreeCanvas'\n  , props: {\n    'width': {\n      type: Number\n      , default: 0\n    }\n    , 'height': {\n      type: Number\n      , default: 0\n    }\n    , 'offsetX': {\n      type: Number\n      , default: 0\n    }\n    , 'offsetY': {\n      type: Number\n      , default: 0\n    }\n    , 'panDuration': {\n      type: Number\n      , default: 1000\n    }\n  }\n  , data: () => ({\n    x: 0\n    , y: 0\n    , elWidth: 0\n    , elHeight: 0\n  })\n  , provide(){\n    this.svgEl = document.createElement('svg')\n    this.svg = SVG(this.svgEl).size('100%', '100%').group()\n    return {\n      // provider: this.provider\n      svg: this.svg\n    }\n  }\n  , mounted(){\n\n    // function getScrollHeight(){\n    //   return document.documentElement.scrollHeight - document.documentElement.offsetHeight\n    // }\n\n    this.$refs.svg.appendChild(this.svgEl.children[0])\n    let impetus = this.impetus = new Impetus({\n      source: this.$el\n      , update: ( x, y ) => {\n        this.cancelPan()\n        this.setOffset( x, y )\n      }\n    })\n\n    const onResize = _debounce(() => {\n      this.onResize()\n      impetus.setBoundX( this.xBounds )\n      impetus.setBoundY( this.yBounds )\n    }, 200)\n\n    const onWheel = ( e ) => {\n      if ( !this.$el.contains(e.target) ){ return }\n      e.preventDefault()\n      let { x, y } = this.getClampedCoords( this.x - e.deltaX, this.y - e.deltaY )\n      impetus.setValues( x, y )\n      this.cancelPan()\n      this.setOffset( x, y )\n      return false\n    }\n\n    const preventDefault = e => e.stopPropagation()\n\n    window.addEventListener('wheel', onWheel, false)\n    window.addEventListener('touchmove', preventDefault, {passive: false})\n\n    this.$watch('width', onResize)\n    this.$watch('height', onResize)\n    window.addEventListener('resize', onResize)\n\n    this.$once( 'hook:beforeDestroy', () => {\n      window.removeEventListener('touchmove', preventDefault)\n      window.removeEventListener('wheel', onWheel)\n      window.removeEventListener('resize', onResize)\n      impetus.destroy()\n    })\n\n    onResize()\n  }\n  , watch: {\n    top: 'fixSVGPosition'\n    , left: 'fixSVGPosition'\n  }\n  , computed: {\n    left(){\n      return this.x + this.offsetX + this.elWidth * 0.5\n    }\n    , top(){\n      return this.y + this.offsetY + this.elHeight * 0.5\n    }\n    , xBounds(){\n      return [-(this.width + this.elWidth) * 0.5, (this.width + this.elWidth) * 0.5]\n    }\n    , yBounds(){\n      return [-(this.height + this.elHeight) * 0.5, (this.height + this.elHeight) * 0.5]\n    }\n  }\n  , methods: {\n    fixSVGPosition(){\n      let x = this.left\n      let y = this.top\n      this.svg.move(x, y)\n    }\n    , setOffset( x2, y2 ){\n      this.x = x2\n      this.y = y2\n      PubSub.$emit('tree:move')\n    }\n    , getClampedCoords( x, y ){\n      let [minX, maxX] = this.xBounds\n      let [minY, maxY] = this.yBounds\n      x = clamp(x, minX, maxX)\n      y = clamp(y, minY, maxY)\n      return { x, y }\n    }\n    , onResize(){\n      this.elWidth = this.$el.offsetWidth\n      this.elHeight = this.$el.offsetHeight\n    }\n    , panTo( x, y, animate = true ){\n      let coords = { x: this.x, y: this.y }\n\n      x = -x\n      y = -y\n      ;({ x, y } = this.getClampedCoords(x, y))\n\n      this.cancelPan()\n\n      if ( !animate ){\n        this.impetus.setValues( x, y )\n        this.setOffset( x, y )\n        return\n      }\n\n      this._activeTween = new TWEEN.Tween( coords )\n        .to({ x, y }, this.panDuration)\n        .easing(TWEEN.Easing.Quadratic.InOut)\n        .onUpdate(() => {\n          this.impetus.setValues( coords.x, coords.y )\n          this.setOffset( coords.x, coords.y )\n        })\n        .start()\n    }\n    , cancelPan(){\n      if ( this._activeTween ){\n        this._activeTween.stop()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\">\n.tree-canvas\n  position: relative\n  width: 100%\n  height: 100%\n.slot\n  position: relative\n.svg\n  position: absolute\n  top: 0\n  left: 0\n  right: 0\n  bottom: 0\n  z-index: 0\n  cursor: move\n  svg\n    shape-rendering: cripsedges\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/tree-canvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrapper\",staticClass:\"tree-canvas\"},[_c('div',{ref:\"svg\",staticClass:\"svg\"}),_c('div',{staticClass:\"slot\",style:({ transform: (\"translate3d(\" + _vm.left + \"px, \" + _vm.top + \"px, 0)\") })},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6daa3cb8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tree/tree-canvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6daa3cb8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tree-canvas.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tree-canvas.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tree-canvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6daa3cb8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./tree-canvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/tree-canvas.vue\n// module id = null\n// module chunks = ","// Build a tree from leafs\n// ---------------------------------------\nimport _clone from 'lodash/clone'\nimport _mapValues from 'lodash/mapValues'\nimport _find from 'lodash/find'\nimport _sortBy from 'lodash/sortBy'\n\nexport function assignDepth( tree, max = 0 ){\n  let depth\n\n  if ( !tree.split ){\n    depth = max + 1\n    tree.depth = depth\n    return depth\n  }\n\n  if ( tree.leaf ){\n    max += 1\n  }\n\n  depth = tree.split.reduce( (m, tree) => Math.max(m, assignDepth(tree, max)), max )\n  tree.depth = depth\n  return depth\n}\n\nfunction toBranch( leaf ){\n  return {\n    // starts from the \"top\" down. (cellular organisms -> ... -> humans)\n    lineage: [].concat(leaf.lineage).reverse()\n    , nTips: 1\n    , leaf: leaf\n    , split: []\n  }\n}\n\nfunction splitAt( tree, branch, i ){\n  branch = _mapValues( branch, _clone )\n\n  // create a cut with a fake leaf that we can fill in later\n  mergeAt( tree, toBranch( { node_id: tree.lineage[i].node_id } ), i )\n\n  branch.lineage.splice( 0, i + 1 )\n\n  tree.nTips++\n  tree.split.push( branch )\n  return 1\n}\n\nfunction mergeAt( tree, branch, i ){\n  branch = _mapValues( branch, _clone )\n\n  let lineage = tree.lineage.splice( 0, i )\n  let leaf = branch.leaf\n\n  tree.lineage.shift() // this is the same as \"leaf\"\n  branch.lineage = tree.lineage\n  branch.split = tree.split\n  branch.nTips = tree.nTips\n  branch.leaf = tree.leaf\n\n  tree.lineage = lineage\n  tree.split = [branch]\n  tree.leaf = leaf\n  return 0\n}\n\nfunction isInStem( stem, branch ){\n  let firstStemId = stem.lineage[0] ? stem.lineage[0].node_id : stem.leaf.node_id\n  let firstBranchId = branch.lineage[0] ? branch.lineage[0].node_id : branch.leaf.node_id\n  return firstStemId === firstBranchId\n}\n\nfunction joinTree( tree, branch ){\n\n  for ( let i = 0, l = tree.lineage.length; i < l; i++ ){\n    let treeParent = tree.lineage[ i ]\n    // check if branch can join the tree's branch\n    let branchParent = branch.lineage[ i ]\n    if ( !branchParent ){\n\n      if ( branch.leaf.node_id === treeParent.node_id ){\n        // the branch is in the middle of the current tree branch\n        return mergeAt( tree, branch, i )\n      } else {\n        // this means we found a new branch\n        return splitAt( tree, branch, i - 1 )\n      }\n    }\n    if ( treeParent.node_id !== branchParent.node_id ){\n      // this means we found a new branch\n      return splitAt( tree, branch, i - 1 )\n    }\n  }\n\n  if ( tree.leaf.node_id === branch.leaf.node_id ){\n    tree.leaf = branch.leaf\n    // edge case when we have already got a split node\n    // from previous merges, but also add the branch for it\n    return 0\n  }\n\n  if (\n    branch.lineage.length === tree.lineage.length ||\n    ( tree.lineage.length < branch.lineage.length &&\n      tree.leaf.node_id !== branch.lineage[tree.lineage.length].node_id )\n  ){\n    return splitAt( tree, branch, tree.lineage.length - 1 )\n  }\n\n  // if ( !tree.split ){\n  //   // this means it splits right at the leaf\n  //   branch = _mapValues( branch, _clone )\n  //   branch.lineage.splice( 0, tree.lineage.length )\n  //   tree.nTips++\n  //   tree.split = [{ lineage: [], nTips: 1, leaf: tree.leaf }, branch]\n  //   delete tree.leaf\n  //   return 1\n  // }\n\n  branch = _mapValues( branch, _clone )\n  branch.lineage.splice( 0, tree.lineage.length + 1 )\n\n  // if we got here, then we didn't find a place to join in the tree lineage...\n  // so let's check the splits\n  let stem = _find( tree.split, stem => isInStem( stem, branch ) )\n  if ( !stem ){\n    // if none of the splits match then add to this split\n    // #edgecases\n    tree.nTips++\n    tree.split.push( branch )\n    return 1\n  }\n\n  let tipsAdded = joinTree( stem, branch )\n  tree.nTips += tipsAdded\n  return tipsAdded\n}\n\n// function getNodeId( branch ){\n//   return branch.leaf ? branch.leaf.node_id : branch.lineage[0].node_id\n// }\n\nfunction treeSort( tree ){\n  if (!tree.split) { return }\n  tree.split.sort( (a, b) => a.depth > b.depth ? 1 : -1 )\n  tree.split.forEach( treeSort )\n}\n\nexport function buildReducedTree( leafs ){\n  // longest first\n  leafs = _sortBy(leafs, n => n.lineage.length).reverse()\n  var tree = toBranch( leafs[0] )\n\n  for ( let i = 1, l = leafs.length; i < l; i++ ){\n    joinTree( tree, toBranch( leafs[i] ) )\n  }\n\n  // assign a depth value to each branch\n  assignDepth( tree )\n\n  // Sorting improves the consistency\n  treeSort( tree )\n\n  return tree\n}\n\nexport function getChildren( branch ){\n  let children = branch.split.length ? branch.split.reduce( (ch, branch) => [...ch, ...getChildren(branch)], [] ) : []\n  return [ branch.leaf ].concat( children )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/tree-utils.js","<template lang=\"pug\">\ntransition(name=\"tree\", appear)\n  .tree(@click=\"openLeafContext = false\", v-if=\"tree\")\n    TreeCanvas(:width=\"width\", :height=\"height\", :offset-x=\"0\", :offset-y=\"0\", ref=\"treeCanvas\")\n      .parent-list.limit-dropdown.dropdown.is-active(\n        v-if=\"openLeafContext\"\n        , :style=\"{ top: leafContextY + 'px', left: leafContextX + 'px' }\"\n        , @wheel.stop=\"\"\n        , @touchstart.stop=\"\"\n        )\n        .dropdown-menu\n          .dropdown-content\n            .dropdown-item.heading.has-text-info Ancestors\n            a.dropdown-item(v-for=\"parent in leafContext.subtree.lineage\", :class=\"{ 'has-text-grey': !parent.taxon }\", @click=\"$emit('add-node', parent.node_id)\") {{ parent | nodeName }}\n      Tree(\n        :tree=\"tree\"\n        , :x=\"x\"\n        , :y=\"y\"\n        , :compactView=\"compactView\"\n        , :cardWidth=\"cardWidth\"\n        , :cardHeight=\"cardHeight\"\n        , :horizontal=\"horizontal\"\n        , :flap-style=\"flapStyle\"\n        , :hide-images=\"hideImages\"\n        , :padding=\"padding\"\n        , :branchSpacing=\"branchSpacing\"\n        , :transitions=\"transitions\"\n        , :computedBranches.sync=\"branches\"\n        , @remove=\"$emit('remove', arguments[0])\"\n        , @cut=\"$emit('cut', arguments[0])\"\n        , @leaf-click=\"showLeafDetails\"\n        , @add-node=\"$emit('add-node', arguments[0])\"\n        , @zoom-in=\"zoomTo(arguments[0].leaf.node_id)\"\n        , @error=\"$emit('error', arguments[0])\"\n        )\n</template>\n\n<script>\nimport PubSub from '@/lib/pubsub'\nimport Tree from '@/components/tree/tree-display'\nimport TreeCanvas from '@/components/tree/tree-canvas'\nimport { buildReducedTree } from '@/lib/tree-utils'\nimport _differenceBy from 'lodash/differenceBy'\nimport _find from 'lodash/find'\n\nexport default {\n  name: 'TOLTree'\n  , props: [ 'leafs', 'cardWidth', 'horizontal', 'hideImages', 'compactView', 'flapStyle' ]\n  , components: {\n    Tree\n    , TreeCanvas\n  }\n  , data: () => ({\n    leafContext: null\n    , openLeafContext: false\n    , leafContextX: 0\n    , leafContextY: 0\n    , padding: 10\n    , outerPadding: -80\n    , canvasX: 0\n    , transitions: true\n    , branches: [] // READ ONLY\n  })\n  , computed: {\n    x(){\n      if ( !this.tree || !this.$el ){ return 0 }\n      if ( this.horizontal ){ return -0.5 * this.width }\n      return 0\n    }\n\n    , y(){\n      if ( !this.tree || !this.$el ){ return 0 }\n      if ( this.horizontal ){ return 0 }\n      return -0.5 * this.height\n    }\n\n    , branchSpacing(){\n      return this.horizontal ? 160 : 80\n    }\n\n    , cardHeight(){\n      return this.flapStyle ? 110 : 90\n    }\n\n    , width(){\n      if ( !this.tree ){ return 0 }\n      if ( !this.horizontal ){\n        // vertical display\n        return 2 * this.outerPadding + this.tree.nTips * ( this.cardWidth + 2 * this.padding )\n      }\n      // horizontal display\n      return 2 * this.outerPadding + this.tree.depth * (this.cardWidth + this.branchSpacing)\n    }\n\n    , height(){\n      if ( !this.tree ){ return 0 }\n      if ( this.horizontal ){\n        // horizontal display\n        return 2 * this.outerPadding + this.tree.nTips * ( this.cardHeight + 2 * this.padding )\n      }\n      // vertical display\n      return 2 * this.outerPadding + this.tree.depth * (this.cardHeight + this.branchSpacing)\n    }\n\n    , tree(){\n      if (!this.leafs || !this.leafs.length){ return null }\n      return buildReducedTree( this.leafs )\n    }\n  }\n  , mounted(){\n    PubSub.$on('tree:pan-to', (nodeId) => this.$nextTick(() => this.panTo(nodeId)))\n  }\n  , beforeDestroy(){\n    PubSub.$off('tree:pan-to')\n  }\n  , watch: {\n    tree( newVal, oldVal ){\n      if ( oldVal === null ){\n        this.$nextTick( () => this.centerTree() )\n      }\n    }\n    , horizontal(){\n      this.centerTree()\n    }\n    , leafs( newVal, oldVal ){\n      if ( !oldVal || !oldVal.length ){ return }\n      let newLeafs = _differenceBy( newVal, oldVal, 'node_id' )\n      if ( !newLeafs.length ){ return }\n      this.$nextTick(() => {\n        this.panTo( newLeafs[0].node_id )\n      })\n    }\n    , compactView(){\n      if ( this.compactView ){\n        this.centerTree()\n      }\n    }\n  }\n  , methods: {\n    showLeafDetails( leaf ){\n      let height = leaf.subtree.lineage.length * 30\n      this.openLeafContext = true\n      this.leafContext = leaf\n      this.leafContextX = leaf.x + 30\n      this.leafContextY = leaf.y - 50 + Math.max(0, 50 - height)\n    }\n\n    , zoomTo( nodeId ){\n      this.$router.replace({ query: {...this.$route.query, c: false} })\n      this.transitions = false\n      this.$nextTick(() => {\n        this.panTo( nodeId )\n        this.transitions = true\n      })\n    }\n\n    , panTo( nodeId ){\n      let branch = _find(this.branches, { key: nodeId })\n      if ( !branch ){ return }\n      this.$refs.treeCanvas.panTo( branch.x, branch.y )\n    }\n\n    , centerTree(){\n      if ( !this.$refs.treeCanvas ){ return }\n\n      let x, y\n      let margin = 80\n\n      if ( this.horizontal ){\n        x = (this.$el.clientWidth - this.width) * 0.5 - margin\n        y = 0\n      } else {\n        x = 0\n        y = (this.$el.clientHeight - this.height) * 0.5 - margin\n      }\n\n      this.$refs.treeCanvas.panTo( x, y, false )\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n@import '@/styles/_variables.scss'\n.tree\n  position: relative\n  width: 100%\n  height: 100%\n  z-index: 1\n  opacity: 1\n.tree-enter-active, .tree-leave-active\n  transition: opacity 0.3s 0.2s linear\n.tree-enter, .tree-leave-to\n  opacity: 0\n\n.parent-list\n  position: absolute\n  //- for some reason ios doesn't like z-index\n  transform: translateZ(10px)\n  z-index: 100\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tol-tree.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"tree\",\"appear\":\"appear\"}},[(_vm.tree)?_c('div',{staticClass:\"tree\",on:{\"click\":function($event){_vm.openLeafContext = false}}},[_c('TreeCanvas',{ref:\"treeCanvas\",attrs:{\"width\":_vm.width,\"height\":_vm.height,\"offset-x\":0,\"offset-y\":0}},[(_vm.openLeafContext)?_c('div',{staticClass:\"parent-list limit-dropdown dropdown is-active\",style:({ top: _vm.leafContextY + 'px', left: _vm.leafContextX + 'px' }),on:{\"wheel\":function($event){$event.stopPropagation();},\"touchstart\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"dropdown-menu\"},[_c('div',{staticClass:\"dropdown-content\"},[_c('div',{staticClass:\"dropdown-item heading has-text-info\"},[_vm._v(\"Ancestors\")]),_vm._l((_vm.leafContext.subtree.lineage),function(parent){return _c('a',{staticClass:\"dropdown-item\",class:{ 'has-text-grey': !parent.taxon },on:{\"click\":function($event){return _vm.$emit('add-node', parent.node_id)}}},[_vm._v(_vm._s(_vm._f(\"nodeName\")(parent)))])})],2)])]):_vm._e(),_c('Tree',{attrs:{\"tree\":_vm.tree,\"x\":_vm.x,\"y\":_vm.y,\"compactView\":_vm.compactView,\"cardWidth\":_vm.cardWidth,\"cardHeight\":_vm.cardHeight,\"horizontal\":_vm.horizontal,\"flap-style\":_vm.flapStyle,\"hide-images\":_vm.hideImages,\"padding\":_vm.padding,\"branchSpacing\":_vm.branchSpacing,\"transitions\":_vm.transitions,\"computedBranches\":_vm.branches},on:{\"update:computedBranches\":function($event){_vm.branches=$event},\"update:computed-branches\":function($event){_vm.branches=$event},\"remove\":function($event){return _vm.$emit('remove', arguments[0])},\"cut\":function($event){return _vm.$emit('cut', arguments[0])},\"leaf-click\":_vm.showLeafDetails,\"add-node\":function($event){return _vm.$emit('add-node', arguments[0])},\"zoom-in\":function($event){return _vm.zoomTo(arguments[0].leaf.node_id)},\"error\":function($event){return _vm.$emit('error', arguments[0])}}})],1)],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2b87e7ec\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tol-tree.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2b87e7ec\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tol-tree.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol-tree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol-tree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2b87e7ec\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tol-tree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2b87e7ec\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tol-tree.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.search(@keyup.esc=\"closeOverlay\")\n  .overlay.scrollbars(v-show=\"overlayOpen\", tabindex=\"-1\")\n    .inner\n      .button.is-outlined.is-large.close(@click=\"closeOverlay\")\n        b-icon(icon=\"backburger\", size=\"is-medium\")\n      b-field\n        b-input(expanded, size=\"is-large\", v-model=\"searchEntry\", ref=\"overlayInput\", icon=\"magnify\", placeholder=\"eg. Snow Leopard\")\n        span.clear-btn.delete.is-large(@click=\"clear\")\n      .results\n        b-loading(:active=\"isFetching || isFetchingSci\", :is-full-page=\"false\")\n        .columns\n          .column\n            aside.menu\n              p.menu-label By Common Name...\n              ul.menu-list\n                li.item(v-for=\"result in results\")\n                  a(@click=\"selectResult( result )\")\n                    span.tag {{ result.rank || '?' }}\n                    span.common-names.has-text-info {{ result.commonNames }}\n                    span.scientific-name ({{ result.scientificName }})\n          .column\n            aside.menu\n              p.menu-label By Scientific Name...\n              ul.menu-list\n                li.item(v-for=\"result in scientificResults\")\n                  a(@click=\"selectResult( result )\")\n                    span.tag {{ result.rank || '?' }}\n                    span.common-names.has-text-info {{ result.scientificName }}\n                    span.scientific-name {{ result.commonNames }}\n        .empty-results-msg(v-if=\"searchEntry && !isFetching && !isFetchingSci && !results.length && !scientificResults.length\")\n          | No results. Is it spelled correctly?\n  b-field(expanded)\n    b-field\n      b-input(type=\"text\", @input=\"search\", @keyup.native=\"openOverlay\", v-model=\"searchEntry\", placeholder=\"start typing...\", icon=\"magnify\")\n      .control\n        .button(@click=\"openOverlay\")\n          span Search\n      //- b-autocomplete(\n      //-   placeholder=\"eg. Snow Leopard\"\n      //-   , icon=\"magnify\"\n      //-   , :keep-first=\"true\"\n      //-   , :data=\"results\"\n      //-   , v-model=\"searchEntry\"\n      //-   , :loading=\"isFetching\"\n      //-   , @input=\"search\"\n      //-   , @select=\"selectResult\"\n      //-   , expanded\n      //- )\n      //-   template(slot-scope=\"props\")\n      //-     .columns\n      //-       .common-names.column.is-half.has-text-info {{ props.option.commonNames }}\n      //-       .scientific-name.column.is-half {{ props.option.scientificName }}\n</template>\n\n<script>\nimport _debounce from 'lodash/debounce'\nimport _reject from 'lodash/reject'\nimport _uniqBy from 'lodash/uniqBy'\nimport _some from 'lodash/some'\nimport cacher from '@/lib/cacher'\nimport { getNodeByName, getTxResultsByNames } from '@/lib/otol'\nimport * as gbif from '@/lib/gbif'\nimport * as wikidata from '@/lib/wikidata'\n\n// flags that correspond to txn info that doesn't have an ott node\nconst BADFLAGS = ['MERGED', 'INCONSISTENT']\n\nfunction filterByOTLMatches( results ){\n  return getTxResultsByNames( results.map( el => el.canonicalName || el.scientificName ) )\n    .then( otlMatches => _reject( otlMatches, el => _some( el.matches[0].taxon.flags, f => BADFLAGS.indexOf(f) > -1 ) ) )\n    .then( otlMatches => otlMatches.map( el => el.name ) )\n    .then( otlNames => results.filter( el =>\n      otlNames.indexOf(el.canonicalName || el.scientificName) > -1\n    ))\n}\n\nfunction removeDuplicates( results ){\n  return _uniqBy( results, 'canonicalName' )\n}\n\nfunction removeLackingVernacularName( results ){\n  return _reject( results, r => !r.vernacularNameList )\n}\n\nexport default {\n  name: 'TOLCommonNameSearch'\n  , props: ['leaves']\n  , components: {\n\n  }\n  , data: () => ({\n    results: []\n    , scientificResults: []\n    , searchEntry: ''\n    , source: 'gbif'\n    , isFetching: false\n    , isFetchingSci: false\n\n    , overlayOpen: false\n  })\n  , methods: {\n    openOverlay(){\n      this.overlayOpen = true\n      document.documentElement.style.overflow = 'hidden'\n      this.$refs.overlayInput.focus()\n    }\n\n    , closeOverlay(){\n      this.overlayOpen = false\n      document.documentElement.style.overflow = ''\n    }\n\n    , search( q ){\n      q = q.trim()\n      this.results = []\n      this.scientificResults = []\n\n      if (!q){ return }\n\n      this.openOverlay()\n\n      this.isFetching = true\n      this.isFetchingSci = true\n      this.execSearch( q )\n    }\n\n    , execSearch: _debounce(function( q ) {\n      let query\n\n      if ( this.source !== 'wikidata' ){\n        // gbif search\n        query = this.searchGbif( q )\n      } else {\n        // wikidata search\n        query = this.searchWikidata( q )\n      }\n\n      query\n        .then( results => {\n          this.results = results\n          this.isFetching = false\n        })\n        .catch( e => {\n          this.errorMsg(e)\n        })\n\n      this.searchGbif( q, false )\n        .then( results => {\n          this.scientificResults = results\n          this.isFetchingSci = false\n        })\n        .catch( e => {\n          this.errorMsg(e)\n        })\n    }, 500)\n\n    , searchGbif: cacher(function( q, commonName = true ){\n      let query = commonName\n        ? gbif.findByCommonName( q ).then( removeLackingVernacularName )\n        : gbif.findByScientificName( q )\n      return query\n        .then( removeDuplicates )\n        .then( filterByOTLMatches )\n        .then( results =>\n          results.map( el => ({\n            commonNames: el.vernacularNameList\n            , scientificName: el.canonicalName || el.scientificName\n            , rank: el.rank\n          }))\n        )\n    })\n\n    , searchWikidata( q ){\n      return wikidata.findInfoByCommonName( q, { limit: 10 } )\n        .then( filterByOTLMatches )\n        .then( results =>\n          results.map( el => ({\n            commonNames: el.commonName.join(', ')\n            , scientificName: el.scientificName.join(', ')\n            , rank: el.rank\n          }))\n        )\n    }\n\n    , selectResult( entry ){\n      this.closeOverlay()\n      getNodeByName( entry.scientificName )\n        .then( () => this.$emit( 'select', entry ) )\n        .catch( error => this.errorMsg(error) )\n    }\n\n    , errorMsg( error ){\n      this.$toast.open({\n        duration: 5000\n        , message: `Error: ${error.message}`\n        , type: 'is-danger'\n      })\n    }\n\n    , clear(){\n      this.searchEntry = ''\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"sass\">\n.common-names, .scientific-names\n  white-space: normal\n.overlay\n  position: fixed\n  top: 0\n  left: 0\n  right: 0\n  height: 100vh\n  background: rgba(255,255,255,1)\n  z-index: 20\n  overflow: auto\n  .close\n    position: absolute\n    top: 25px\n    left: 15px\n  .inner\n    margin: 25px 50px 25px 80px\n  .clear-btn\n    position: absolute\n    top: 36px\n    right: 58px\n    z-index: 5\n.results\n  position: relative\n  margin-top: 1.5em\n  min-height: 300px\n  .item\n    span\n      margin-right: 1ex\n      &:last-child\n        margin-right: 0\n\n.empty-results-msg\n  text-align: center\n  margin-top: 4em\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tol-common-name-search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\",on:{\"keyup\":function($event){if(('keyCode' in $event)&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.closeOverlay($event)}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.overlayOpen),expression:\"overlayOpen\"}],staticClass:\"overlay scrollbars\",attrs:{\"tabindex\":\"-1\"}},[_c('div',{staticClass:\"inner\"},[_c('div',{staticClass:\"button is-outlined is-large close\",on:{\"click\":_vm.closeOverlay}},[_c('b-icon',{attrs:{\"icon\":\"backburger\",\"size\":\"is-medium\"}})],1),_c('b-field',[_c('b-input',{ref:\"overlayInput\",attrs:{\"expanded\":\"expanded\",\"size\":\"is-large\",\"icon\":\"magnify\",\"placeholder\":\"eg. Snow Leopard\"},model:{value:(_vm.searchEntry),callback:function ($$v) {_vm.searchEntry=$$v},expression:\"searchEntry\"}}),_c('span',{staticClass:\"clear-btn delete is-large\",on:{\"click\":_vm.clear}})],1),_c('div',{staticClass:\"results\"},[_c('b-loading',{attrs:{\"active\":_vm.isFetching || _vm.isFetchingSci,\"is-full-page\":false}}),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('aside',{staticClass:\"menu\"},[_c('p',{staticClass:\"menu-label\"},[_vm._v(\"By Common Name...\")]),_c('ul',{staticClass:\"menu-list\"},_vm._l((_vm.results),function(result){return _c('li',{staticClass:\"item\"},[_c('a',{on:{\"click\":function($event){return _vm.selectResult( result )}}},[_c('span',{staticClass:\"tag\"},[_vm._v(_vm._s(result.rank || '?'))]),_c('span',{staticClass:\"common-names has-text-info\"},[_vm._v(_vm._s(result.commonNames))]),_c('span',{staticClass:\"scientific-name\"},[_vm._v(\"(\"+_vm._s(result.scientificName)+\")\")])])])}),0)])]),_c('div',{staticClass:\"column\"},[_c('aside',{staticClass:\"menu\"},[_c('p',{staticClass:\"menu-label\"},[_vm._v(\"By Scientific Name...\")]),_c('ul',{staticClass:\"menu-list\"},_vm._l((_vm.scientificResults),function(result){return _c('li',{staticClass:\"item\"},[_c('a',{on:{\"click\":function($event){return _vm.selectResult( result )}}},[_c('span',{staticClass:\"tag\"},[_vm._v(_vm._s(result.rank || '?'))]),_c('span',{staticClass:\"common-names has-text-info\"},[_vm._v(_vm._s(result.scientificName))]),_c('span',{staticClass:\"scientific-name\"},[_vm._v(_vm._s(result.commonNames))])])])}),0)])])]),(_vm.searchEntry && !_vm.isFetching && !_vm.isFetchingSci && !_vm.results.length && !_vm.scientificResults.length)?_c('div',{staticClass:\"empty-results-msg\"},[_vm._v(\"No results. Is it spelled correctly?\")]):_vm._e()],1)],1)]),_c('b-field',{attrs:{\"expanded\":\"expanded\"}},[_c('b-field',[_c('b-input',{attrs:{\"type\":\"text\",\"placeholder\":\"start typing...\",\"icon\":\"magnify\"},on:{\"input\":_vm.search},nativeOn:{\"keyup\":function($event){return _vm.openOverlay($event)}},model:{value:(_vm.searchEntry),callback:function ($$v) {_vm.searchEntry=$$v},expression:\"searchEntry\"}}),_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"button\",on:{\"click\":_vm.openOverlay}},[_c('span',[_vm._v(\"Search\")])])])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23a4b036\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tol-common-name-search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23a4b036\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tol-common-name-search.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol-common-name-search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol-common-name-search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23a4b036\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tol-common-name-search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23a4b036\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tol-common-name-search.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.suggested-trees\n  // b-message(title=\"Note\", type=\"is-danger\", aria-close-label=\"Dismiss\")\n  //   | The tree server is experiencing issues so the explorer may not function. This should be fixed soon so check back another time.\n  .hero.is-primary\n    .hero-body\n      .container\n        h2.title Welcome!\n        p Here's a list of curated trees for you to start from...\n  article.suggestion.clickable(v-for=\"sug in suggestions\", @click=\"suggest(sug.ottIds)\")\n    .container\n      .media\n        figure.media-left\n          p.image\n            img(:src=\"sug.image\")\n        .media-content\n          .content\n            p.title {{ sug.title }}\n            p(v-html=\"sug.desc\")\n</template>\n\n<script>\nconst suggestions = [\n  {\n    title: `Darwin's Finches`\n    , image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Darwin%27s_finches_by_Gould.jpg/440px-Darwin%27s_finches_by_Gould.jpg'\n    , desc: `Darwin's finches (also known as the Galpagos finches) are a group of about fifteen species of passerine birds. They are well known for their remarkable diversity in beak form and function. They are often classified as the subfamily Geospizinae or tribe Geospizini. &mdash; Wikipedia`\n    , ottIds: [\n      'ott589951'\n      , 'ott589956'\n      , 'ott5859950'\n      , 'ott589953'\n      , 'ott589955'\n      , 'ott589959'\n      , 'ott419376'\n      , 'ott419363'\n      , 'ott422530'\n      , 'ott419367'\n      , 'ott963505'\n      , 'ott527328'\n      , 'ott589949'\n      , 'ott527327'\n      , 'ott992256'\n      , 'ott589943'\n    ]\n  }\n  , {\n    title: 'Our \"Cousins\"'\n    , image: 'https://upload.wikimedia.org/wikipedia/commons/f/fb/Lightmatter_chimp.jpg'\n    , desc: 'Species of Ape near Humans on the tree of life'\n    , ottIds: [\n      'ott417969'\n      , 'ott417957'\n      , 'ott770315'\n      , 'ott417949'\n    ]\n  }\n  , {\n    title: 'Dinosaurs (and friends)'\n    , desc: 'Dinosaurs, their desendants, and near cousins.'\n    , image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ab/Palais_de_la_Decouverte_Tyrannosaurus_rex_p1050042.jpg/320px-Palais_de_la_Decouverte_Tyrannosaurus_rex_p1050042.jpg'\n    , ottIds: [\n      'ott90215'\n      , 'ott81461'\n      , 'ott195672'\n      , 'ott195670'\n      , 'ott335582'\n      , 'ott639666'\n      , 'ott329823'\n      , 'ott35888'\n      , 'ott35887'\n    ]\n  }\n  , {\n    title: 'Cats'\n    , desc: 'The ones we keep as pets, and the... bigger ones'\n    , image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Two_littermates_cuddling_06.jpg/320px-Two_littermates_cuddling_06.jpg'\n    , ottIds: [\n      'ott763018'\n      , 'ott532127'\n      , 'ott563166'\n      , 'ott563159'\n      , 'ott886829'\n      , 'ott752759'\n      , 'ott42307'\n      , 'ott42314'\n      , 'ott563151'\n      , 'ott42324'\n      , 'ott42322'\n    ]\n  }\n  , {\n    title: 'Peculiar Animals'\n    , image: 'https://upload.wikimedia.org/wikipedia/commons/f/f6/AxolotlBE.jpg'\n    , desc: 'A collection of strange looking animals.'\n    , ottIds: [\n      'ott984726'\n      , 'ott852676'\n      , 'ott679701'\n      , 'ott292504'\n      , 'ott1014156'\n      , 'ott71606'\n      , 'ott435643'\n      , 'ott721280'\n      , 'ott3632049'\n      , 'ott3652359'\n      , 'ott881015'\n      , 'ott464697'\n      , 'ott496400'\n      , 'ott50727'\n      , 'ott962377'\n    ]\n  }\n  , {\n    title: 'Prehistoric Animals that Survived'\n    , image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/Cheeeeeese_....._%2826732940981%29.jpg/320px-Cheeeeeese_....._%2826732940981%29.jpg'\n    , desc: 'A collection of animals that humans have found fossils of, and have survived the trials of natural selection to the present day.'\n    , ottIds: [\n      'ott73664'\n      , 'ott334633'\n      , 'ott801615'\n      , 'ott257929'\n      , 'ott754422'\n      , 'ott424193'\n      , 'ott511973'\n      , 'ott344064'\n      , 'ott35890'\n      , 'ott1093624'\n      , 'ott1084890'\n      , 'ott773491'\n      , 'ott3594707'\n      , 'ott616361'\n      , 'ott983579'\n      , 'ott962377'\n      , 'ott604022'\n      , 'ott316994'\n      , 'ott904117'\n      , 'ott469472'\n      , 'ott335582'\n      , 'ott397243'\n      , 'ott3617970'\n    ]\n  }\n  , {\n    title: 'Eat your veggies'\n    , desc: 'Closely related and good for you! Get to know your greens.'\n    , image: 'https://commons.wikimedia.org/wiki/Special:FilePath/Broccoli%20and%20cross%20section%20edit.jpg'\n    , ottIds: [\n      'ott833618'\n      , 'ott472637'\n      , 'ott309288'\n      , 'ott833642'\n      , 'ott526294'\n      , 'ott181145'\n      , 'ott181153'\n      , 'ott209048'\n      , 'ott505210'\n      , 'ott833623'\n      , 'ott833629'\n      , 'ott833638'\n      , 'ott951624'\n    ]\n  }\n]\n\nexport default {\n  name: 'TOLSuggestedTrees'\n  , props: []\n  , components: {\n  }\n  , data: () => ({\n    suggestions\n  })\n  , methods: {\n    suggest( ids ){\n      this.$emit('suggest', ids)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"sass\">\n@import '@/styles/_variables.scss'\n.card\n  height: 100%\n.suggestion\n  transition: all .15s linear\n  @media screen and (min-width: $tablet)\n    &\n      padding-top: 0.5rem\n      padding-bottom: 0.5rem\n\n  .media-content\n    display: flex\n    flex-direction: row\n    align-items: center\n    align-self: stretch\n  .image\n    width: 256px\n    overflow: hidden\n    border-radius: 3px\n  .title\n    transition: all .15s linear\n  &:hover\n    color: $white\n    background: $blue\n    .title\n      color: $white\n\n@media screen and (max-width: $tablet)\n  .suggestion\n    .image\n      margin: auto\n      width: 100%\n  .media\n    flex-direction: column\n    .media-left\n      width: 100%\n      margin: 0\n    .media-content\n      padding: 3rem 1.5rem\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tol-suggested-trees.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"suggested-trees\"},[_vm._m(0),_vm._l((_vm.suggestions),function(sug){return _c('article',{staticClass:\"suggestion clickable\",on:{\"click\":function($event){return _vm.suggest(sug.ottIds)}}},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"media\"},[_c('figure',{staticClass:\"media-left\"},[_c('p',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":sug.image}})])]),_c('div',{staticClass:\"media-content\"},[_c('div',{staticClass:\"content\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(sug.title))]),_c('p',{domProps:{\"innerHTML\":_vm._s(sug.desc)}})])])])])])})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hero is-primary\"},[_c('div',{staticClass:\"hero-body\"},[_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"Welcome!\")]),_c('p',[_vm._v(\"Here's a list of curated trees for you to start from...\")])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6d4ad57b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tol-suggested-trees.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6d4ad57b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tol-suggested-trees.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol-suggested-trees.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol-suggested-trees.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6d4ad57b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tol-suggested-trees.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6d4ad57b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tol-suggested-trees.vue\n// module id = null\n// module chunks = ","const docEl = document.documentElement\n\nexport const canFullscreen = (function(){\n  return docEl.requestFullscreen ||\n    docEl.webkitRequestFullscreen ||\n    docEl.mozRequestFullScreen ||\n    docEl.msRequestFullscreen\n})()\n\nexport function requestFullscreen( el ){\n  if (el.requestFullscreen) {\n    return el.requestFullscreen()\n  } else if (el.webkitRequestFullscreen) {\n    return el.webkitRequestFullscreen()\n  } else if (el.mozRequestFullScreen) {\n    return el.mozRequestFullScreen()\n  } else if (el.msRequestFullscreen) {\n    return el.msRequestFullscreen()\n  }\n}\n\nexport function exitFullscreen(){\n  if (document.exitFullscreen) {\n    document.exitFullscreen()\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen()\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen()\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen()\n  }\n}\n\nexport function getFullscreenEl(){\n  return document.fullscreenElement ||\n    document.webkitFullscreenElement ||\n    document.mozFullScreenElement ||\n    document.msFullscreenElement\n}\n\nexport const fullscreenEventName = (function(){\n  const events = [\n    [ 'requestFullscreen', 'fullscreenchange' ]\n    , [ 'webkitRequestFullScreen', 'webkitfullscreenchange' ]\n    , [ 'mozRequestFullScreen', 'mozfullscreenchange' ]\n    , [ 'msRequestFullscreen', 'onmsfullscreenchange' ]\n  ]\n\n  for ( let e of events ){\n    if ( document.body[e[0]] ){\n      return e[1]\n    }\n  }\n\n  return null\n})()\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/fullscreen.js","<template lang=\"pug\">\n.app(:class=\"{ 'nav-open': navOpen }\")\n  nav.top-nav.box.is-radiusless.toolbar\n    .button.menu-button(@click=\"menuToggle\")\n      b-icon(:icon=\"navOpen ? 'chevron-up' : 'menu'\")\n    .toolbar-item\n      h1.title.main-title.is-pulled-left.clickable(@click=\"clear\")\n        | Tree of Life Explorer\n    .toolbar-item.search-container\n      TOLCommonNameSearch.search-box(@select=\"onSelect\")\n    .toolbar-right.top-controls\n      b-field(grouped)\n        b-field\n          .control\n            b-tooltip(label=\"Clear the tree\", type=\"is-dark\", position=\"is-bottom\")\n              .button.is-primary(@click=\"clear\")\n                b-icon(icon=\"home\")\n        b-field\n          .control\n            b-tooltip(label=\"Undo\", type=\"is-dark\", position=\"is-bottom\")\n              .button(@click=\"undo\")\n                b-icon(icon=\"undo\")\n          .control\n            b-tooltip(label=\"Redo\", type=\"is-dark\", position=\"is-bottom\")\n              .button(@click=\"redo\")\n                b-icon(icon=\"redo\")\n        b-field\n          b-dropdown.options-dropdown(:mobile-modal=\"false\")\n            .button(slot=\"trigger\")\n              span Options\n              b-icon(icon=\"menu-down\")\n            b-dropdown-item(@click=\"setOption('fs', !flapStyle)\")\n              b-icon(:icon=\"flapStyle ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'\")\n              span Uncover Images\n            b-dropdown-item(@click=\"setOption('im', !hideImages)\")\n              b-icon(:icon=\"hideImages ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'\")\n              span Hide Images\n            b-dropdown-item(@click=\"setOption('h', !horizontalMode)\")\n              b-icon(:icon=\"horizontalMode ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'\")\n              span Horizontal Tree\n            b-dropdown-item(@click=\"setOption('w', !wideMode)\")\n              b-icon(:icon=\"wideMode ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'\")\n              span Wide Cards\n\n          //- .control\n          //-   b-tooltip(:label=\"wideMode ? 'Smaller cards' : 'Bigger cards'\", type=\"is-dark\", position=\"is-bottom\")\n          //-     .button(@click=\"setOption('w', !wideMode)\")\n          //-       b-icon(:icon=\"wideMode? 'arrow-collapse-horizontal' : 'arrow-expand-horizontal'\")\n          //- .control\n          //-   b-tooltip(:label=\"'Change Tree Orientation'\", type=\"is-dark\", position=\"is-bottom\")\n          //-     .button(@click=\"setOption('h', !horizontalMode)\")\n          //-       b-icon(icon=\"tournament\", :custom-class=\"horizontalMode ? 'icon-anim icon-180' : 'icon-anim icon-270'\")\n          //- .control\n          //-   b-tooltip(:label=\"hideImages ? 'Show Images' : 'Hide Images'\", type=\"is-dark\", position=\"is-bottom\")\n          //-     .button(@click=\"setOption('im', !hideImages)\")\n          //-       b-icon(:icon=\"hideImages ? 'image-plus' : 'image-off'\")\n        b-field\n          .control\n            b-tooltip(label=\"Share this tree\", type=\"is-dark\", position=\"is-bottom\")\n              .button.is-success(@click=\"share\")\n                b-icon(icon=\"share\")\n          .control\n            b-tooltip(label=\"Take a helpful tour\", type=\"is-dark\", position=\"is-bottom\", data-v-tour=\"start\")\n              .button.is-dark(@click=\"startTour\", :class=\"{ pulsing: tourMessage }\")\n                b-icon(icon=\"help-network\")\n\n      .meta-info\n        a(@click=\"showMetaInfo\") About this app\n\n  .below-nav\n    .tol-wrapper(v-show=\"!treeIsEmpty\")\n      TOLTree(\n        :leafs=\"leafs\"\n        , :card-width=\"cardWidth\"\n        , :hide-images=\"hideImages\"\n        , :compactView=\"compactView\"\n        , :horizontal=\"horizontalMode\"\n        , :flap-style=\"flapStyle\"\n        , @remove=\"onRemoveLeaf\"\n        , @cut=\"cutBranch\"\n        , @add-node=\"addNode\"\n        , @error=\"onError\"\n      )\n    .wrapper\n      .inner\n        b-loading(:is-full-page=\"false\", :active=\"loading\")\n        .empty-state(v-show=\"treeIsEmpty\")\n          .suggested\n            TOLSuggestedTrees(@suggest=\"setLeafs\")\n\n  .bottom-controls\n    b-field\n      .control\n        b-tooltip(:label=\"compactView ? 'Normal View' : 'Compact View'\", type=\"is-dark\", position=\"is-left\")\n          .button.button-compact-view.is-medium(@click=\"setOption('c', !compactView)\")\n            b-icon(:icon=\"compactView ? 'magnify-plus' : 'magnify-minus'\")\n      .control(v-if=\"canFullscreen\")\n        b-tooltip(:label=\"isInFullscreen ? 'Exit Fullscreen' : 'Enter Fullscreen'\", type=\"is-dark\", position=\"is-left\")\n          .button.is-medium(@click=\"fullscreenToggle\")\n            b-icon(:icon=\"isInFullscreen ? 'compress' : 'expand'\", pack=\"fas\")\n</template>\n\n<script>\nimport PubSub from '@/lib/pubsub'\nimport TOLTree from '@/components/tol-tree'\nimport TOLCommonNameSearch from '@/components/tol-common-name-search'\nimport TOLSuggestedTrees from '@/components/tol-suggested-trees'\nimport { getNodeByName } from '@/lib/otol'\n// import { findByName } from '@/lib/gbif'\nimport { getLeaf } from '@/lib/taxonomy'\nimport { getChildren } from '@/lib/tree-utils'\nimport { getFullscreenEl, requestFullscreen, exitFullscreen, canFullscreen, fullscreenEventName } from '@/lib/fullscreen'\nimport { copyToClipboard } from '@/lib/utils'\nimport _difference from 'lodash/difference'\nimport _castArray from 'lodash/castArray'\nimport _uniq from 'lodash/uniq'\nimport _startsWith from 'lodash/startsWith'\nimport _filter from 'lodash/filter'\nimport _union from 'lodash/union'\nimport _debounce from 'lodash/debounce'\nimport Promise from 'bluebird'\n\nexport default {\n  name: 'page-tol'\n  , props: {\n    'ids': {\n      type: Array\n      , default: () => []\n    }\n    , wideMode: {\n      type: Boolean\n      , default: false\n    }\n    , horizontalMode: {\n      type: Boolean\n      , default: true\n    }\n    , hideImages: {\n      type: Boolean\n      , default: false\n    }\n    , compactView: {\n      type: Boolean\n      , default: false\n    }\n    , flapStyle: {\n      type: Boolean\n      , default: false\n    }\n  }\n  , components: {\n    TOLTree\n    , TOLCommonNameSearch\n    , TOLSuggestedTrees\n  }\n  , data: () => ({\n    leafs: []\n    , canFullscreen\n    , navOpen: true\n    , loading: false\n    , isInFullscreen: false\n    , tourMessage: false\n  })\n  , created(){\n    if ( fullscreenEventName ){\n      window.addEventListener(fullscreenEventName, () => {\n        this.isInFullscreen = !!(getFullscreenEl())\n      }, { passive: true })\n    }\n  }\n  , computed: {\n    cardWidth(){\n      return this.wideMode ? 260 : 160\n    }\n    , treeIsEmpty(){\n      return !this.leafs.length\n    }\n  }\n  , watch: {\n    ids: {\n      handler( ids, oldIds ){\n        if ( !oldIds || !oldIds.length ){\n          // on first load or tree change... set loading\n          this.loading = true\n        }\n        this.onIdsChanged( this.ids )\n      }\n      , immediate: true\n    }\n  }\n  , mounted(){\n    if (this.$el.offsetWidth < 780){\n      setTimeout(() => {\n        this.navOpen = false\n      }, 1000)\n    }\n\n    // welcome message\n    if ( this.ids && this.ids.length ){ return }\n    setTimeout(() => {\n      const delay = 10000\n      this.tourMessage = true\n      this.$snackbar.open({\n        message: 'Hi there! If you would like me to show you around, click the tour button highlighted above!'\n        , position: 'is-top-right'\n        , duration: delay\n        , type: 'is-white'\n        , actionText: 'go away'\n      })\n      setTimeout( () => {\n        this.tourMessage = false\n      }, delay)\n    }, 2000)\n  }\n  , methods: {\n\n    onError( e ){\n      console.error( e )\n      this.showError( e )\n    }\n\n    , showError: _debounce(function( e ){\n      var message = ''\n      if ( e.message === 'Network Error' ){\n        message = 'Trouble connecting with database! Sorry! Things might not work. Try refreshing...'\n      } else {\n        message = e.message\n      }\n\n      this.$toast.open({\n        message\n        , type: 'is-danger'\n        , duration: 10 * 1000\n        , queue: false\n      })\n    }, 100)\n\n    , undo(){\n      this.$router.back()\n    }\n\n    , redo(){\n      this.$router.forward()\n    }\n\n    , setLeafs( ids ){\n      this.$router.push({ query: { ...this.$route.query, ids: _uniq( ids ) } })\n    }\n\n    , addLeaf( ids ){\n      ids = _castArray( ids )\n      ids = _filter( ids, id => _startsWith(id, 'ott') || _startsWith(id, 'mrca') )\n      ids = _union( ids, this.ids )\n      this.$router.push({ query: { ...this.$route.query, ids } })\n    }\n\n    , removeLeaf( id ){\n      this.$router.push({ query: { ...this.$route.query, ids: _difference( this.ids, _castArray(id) ) } })\n    }\n\n    , onRemoveLeaf( leaf ){\n      this.removeLeaf( leaf.node_id || leaf )\n    }\n\n    , onSelect( entry ){\n      getNodeByName( entry.scientificName ).then( (node) => {\n        this.addLeaf( node.node_id )\n      }).catch( e => this.onError( e ) )\n    }\n\n    , cutBranch( branch ){\n      let children = getChildren( branch )\n      this.removeLeaf( children.map( ch => ch.node_id ) )\n    }\n\n    , addNode( nodeId ){\n      return this.addLeaf( nodeId )\n    }\n\n    , onIdsChanged( ids ){\n      if ( !ids ){ return }\n      Promise.map( ids, getLeaf )\n        .then( leafs => (this.leafs = leafs) )\n        .catch( e => this.onError( e ) )\n        .finally( () => { this.loading = false } )\n    }\n\n    , clear(){\n      this.$router.push({ query: { ...this.$route.query, ids: [] } })\n    }\n\n    , showMetaInfo(){\n      this.$root.showMetaInfo = true\n    }\n\n    , menuToggle(){\n      this.navOpen = !this.navOpen\n    }\n\n    , fullscreenToggle(){\n      let fs = this.isInFullscreen\n\n      if ( fs ){\n        exitFullscreen()\n      } else {\n        requestFullscreen( document.documentElement )\n      }\n    }\n\n    , setOption( name, val ){\n      this.$router.replace({ query: { ...this.$route.query, [name]: (val | 0) } })\n    }\n\n    , share(){\n      copyToClipboard( window.location )\n      this.$toast.open({\n        message: 'URL copied to clipboard!'\n        , type: 'is-success'\n        , position: 'is-top-right'\n      })\n    }\n\n    , startTour(){\n      PubSub.$emit('tour:start')\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"sass\">\n@import '@/styles/_variables.scss'\n$topNavHeight: 100px\n.main-title\n  height: 45px\n  width: 166px\n//   position: relative\n//   font: 0px/0\n//   margin: 0\n//   margin-right: 1rem\n//   font-weight: 700\n//   color: $blue\n//   text-shadow: 1px 1px 1px lighten($blue, 30)\n//\n//   padding-left: 2rem\n//   // &:before\n//   //   content: 'The'\n//   //   position: absolute\n//   //   top: 3px\n//   //   left: 0\n//   //   font-size: 1rem\n.app\n  display: flex\n  flex-direction: column\n  align-items: stretch\n  min-height: 100vh\n.bottom-controls\n  position: fixed\n  bottom: 0\n  right: 0\n  z-index: 22\n  .button\n    border-radius: 3px 0 0 0\n.below-nav\n  position: relative\n  flex: 1\n  margin-top: $topNavHeight\n.tol-wrapper\n  position: fixed\n  top: $topNavHeight\n  left: 0\n  right: 0\n  bottom: 0\n  z-index: 1\n.search-box\n.wrapper\n  flex: 1\n  overflow: hidden\n  display: flex\n  align-items: stretch\n  .inner\n    position: relative\n    flex: 1\n  .tree\n    min-height: 100%\n    margin: auto\n.top-nav\n  position: fixed\n  top: 0\n  left: 0\n  right: 0\n  z-index: 30\n  display: flex\n  padding: 1rem 1.25rem\n\n  .field\n    margin-bottom: 0\n  .switch\n    height: 100%\n  .meta-info\n    border-left: 1px solid $grey-lighter\n    margin-left: 1rem\n    padding-left: 1rem\n\n  .menu-button\n    display: none\n.welcome-msg\n  padding: 3rem 1.5rem 0\n  .splash-image\n    padding: 0 4em\n\n.options-dropdown .dropdown-item\n  display: flex\n  align-items: center\n  flex-direction: row\n  .icon\n    margin-right: 1ex\n@media screen and (max-width: 820px)\n  .below-nav\n    margin-top: 0\n  .tol-wrapper\n    top: 0\n  .top-nav\n    flex-wrap: wrap\n    transform: translate3d(0, -120px, 0)\n    transition: transform 0.3s ease-in-out\n    .nav-open &\n      transform: translate3d(0, 0, 0)\n    .menu-button\n      display: block\n      position: absolute\n      bottom: -36px\n      left: 0\n    .toolbar-item\n      margin-bottom: 1rem\n    .search-container\n      display: flex\n      justify-content: flex-end\n    .toolbar-item,\n    .toolbar-right\n      display: flex\n      flex-direction: row\n    .toolbar-right\n      width: 100%\n      flex-direction: row-reverse\n      & > *\n        flex: 1\n      .meta-info\n        border: none\n        margin-left: 0\n        padding-left: 0\n      .field\n        justify-content: flex-end\n@media screen and (max-width: 420px)\n  .tol-wrapper\n    top: 0\n  .top-nav\n    transform: translate3d(0, -172px, 0)\n    .toolbar-right\n      .meta-info\n        position: absolute\n        top: 20px\n        right: 1.5rem\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/tol.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\",class:{ 'nav-open': _vm.navOpen }},[_c('nav',{staticClass:\"top-nav box is-radiusless toolbar\"},[_c('div',{staticClass:\"button menu-button\",on:{\"click\":_vm.menuToggle}},[_c('b-icon',{attrs:{\"icon\":_vm.navOpen ? 'chevron-up' : 'menu'}})],1),_c('div',{staticClass:\"toolbar-item\"},[_c('h1',{staticClass:\"title main-title is-pulled-left clickable\",on:{\"click\":_vm.clear}},[_vm._v(\"Tree of Life Explorer\")])]),_c('div',{staticClass:\"toolbar-item search-container\"},[_c('TOLCommonNameSearch',{staticClass:\"search-box\",on:{\"select\":_vm.onSelect}})],1),_c('div',{staticClass:\"toolbar-right top-controls\"},[_c('b-field',{attrs:{\"grouped\":\"grouped\"}},[_c('b-field',[_c('div',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":\"Clear the tree\",\"type\":\"is-dark\",\"position\":\"is-bottom\"}},[_c('div',{staticClass:\"button is-primary\",on:{\"click\":_vm.clear}},[_c('b-icon',{attrs:{\"icon\":\"home\"}})],1)])],1)]),_c('b-field',[_c('div',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":\"Undo\",\"type\":\"is-dark\",\"position\":\"is-bottom\"}},[_c('div',{staticClass:\"button\",on:{\"click\":_vm.undo}},[_c('b-icon',{attrs:{\"icon\":\"undo\"}})],1)])],1),_c('div',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":\"Redo\",\"type\":\"is-dark\",\"position\":\"is-bottom\"}},[_c('div',{staticClass:\"button\",on:{\"click\":_vm.redo}},[_c('b-icon',{attrs:{\"icon\":\"redo\"}})],1)])],1)]),_c('b-field',[_c('b-dropdown',{staticClass:\"options-dropdown\",attrs:{\"mobile-modal\":false}},[_c('div',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('span',[_vm._v(\"Options\")]),_c('b-icon',{attrs:{\"icon\":\"menu-down\"}})],1),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.setOption('fs', !_vm.flapStyle)}}},[_c('b-icon',{attrs:{\"icon\":_vm.flapStyle ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'}}),_c('span',[_vm._v(\"Uncover Images\")])],1),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.setOption('im', !_vm.hideImages)}}},[_c('b-icon',{attrs:{\"icon\":_vm.hideImages ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'}}),_c('span',[_vm._v(\"Hide Images\")])],1),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.setOption('h', !_vm.horizontalMode)}}},[_c('b-icon',{attrs:{\"icon\":_vm.horizontalMode ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'}}),_c('span',[_vm._v(\"Horizontal Tree\")])],1),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.setOption('w', !_vm.wideMode)}}},[_c('b-icon',{attrs:{\"icon\":_vm.wideMode ? 'checkbox-marked-circle' : 'checkbox-blank-circle-outline'}}),_c('span',[_vm._v(\"Wide Cards\")])],1)],1)],1),_c('b-field',[_c('div',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":\"Share this tree\",\"type\":\"is-dark\",\"position\":\"is-bottom\"}},[_c('div',{staticClass:\"button is-success\",on:{\"click\":_vm.share}},[_c('b-icon',{attrs:{\"icon\":\"share\"}})],1)])],1),_c('div',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":\"Take a helpful tour\",\"type\":\"is-dark\",\"position\":\"is-bottom\",\"data-v-tour\":\"start\"}},[_c('div',{staticClass:\"button is-dark\",class:{ pulsing: _vm.tourMessage },on:{\"click\":_vm.startTour}},[_c('b-icon',{attrs:{\"icon\":\"help-network\"}})],1)])],1)])],1),_c('div',{staticClass:\"meta-info\"},[_c('a',{on:{\"click\":_vm.showMetaInfo}},[_vm._v(\"About this app\")])])],1)]),_c('div',{staticClass:\"below-nav\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.treeIsEmpty),expression:\"!treeIsEmpty\"}],staticClass:\"tol-wrapper\"},[_c('TOLTree',{attrs:{\"leafs\":_vm.leafs,\"card-width\":_vm.cardWidth,\"hide-images\":_vm.hideImages,\"compactView\":_vm.compactView,\"horizontal\":_vm.horizontalMode,\"flap-style\":_vm.flapStyle},on:{\"remove\":_vm.onRemoveLeaf,\"cut\":_vm.cutBranch,\"add-node\":_vm.addNode,\"error\":_vm.onError}})],1),_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"inner\"},[_c('b-loading',{attrs:{\"is-full-page\":false,\"active\":_vm.loading}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.treeIsEmpty),expression:\"treeIsEmpty\"}],staticClass:\"empty-state\"},[_c('div',{staticClass:\"suggested\"},[_c('TOLSuggestedTrees',{on:{\"suggest\":_vm.setLeafs}})],1)])],1)])]),_c('div',{staticClass:\"bottom-controls\"},[_c('b-field',[_c('div',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":_vm.compactView ? 'Normal View' : 'Compact View',\"type\":\"is-dark\",\"position\":\"is-left\"}},[_c('div',{staticClass:\"button button-compact-view is-medium\",on:{\"click\":function($event){return _vm.setOption('c', !_vm.compactView)}}},[_c('b-icon',{attrs:{\"icon\":_vm.compactView ? 'magnify-plus' : 'magnify-minus'}})],1)])],1),(_vm.canFullscreen)?_c('div',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":_vm.isInFullscreen ? 'Exit Fullscreen' : 'Enter Fullscreen',\"type\":\"is-dark\",\"position\":\"is-left\"}},[_c('div',{staticClass:\"button is-medium\",on:{\"click\":_vm.fullscreenToggle}},[_c('b-icon',{attrs:{\"icon\":_vm.isInFullscreen ? 'compress' : 'expand',\"pack\":\"fas\"}})],1)])],1):_vm._e()])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-928ec8e6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/tol.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-928ec8e6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tol.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tol.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-928ec8e6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tol.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-928ec8e6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tol.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport PageTOL from '@/pages/tol'\nimport _castArray from 'lodash/castArray'\nimport _uniq from 'lodash/uniq'\nimport _compact from 'lodash/compact'\nimport _get from 'lodash/get'\n\nVue.use(Router)\n\nfunction getOption( query, name, def = 0 ){\n  return !!parseInt(_get(query, name, def))\n}\n\nexport default new Router({\n  routes: [\n    {\n      path: '/'\n      , name: 'index'\n      , component: PageTOL\n      , props: (route) => ({\n        ids: _compact(_uniq(_castArray(route.query.ids)))\n        , wideMode: getOption(route.query, 'w')\n        , horizontalMode: getOption(route.query, 'h', 1)\n        , hideImages: getOption(route.query, 'im')\n        , compactView: getOption(route.query, 'c')\n        , flapStyle: getOption(route.query, 'fs')\n      })\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","<template>\n  <div id=\"app\">\n    <slot/>\n    <router-view/>\n    <v-tour name=\"TOLTour\" :steps=\"TourSteps\" :callbacks=\"TourCallbacks\"></v-tour>\n  </div>\n</template>\n\n<script>\nimport PubSub from '@/lib/pubsub'\nimport router from './router'\nimport _throttle from 'lodash/throttle'\n\nconst txnCats = 'ott563159'\nconst TourTree = [\n  'ott532117'\n  , 'ott563166'\n  , 'ott770315'\n  , txnCats\n]\n\nconst TourSteps = [\n  {\n    target: '[data-v-tour=\"start\"]'\n    , content: `Welcome to the MinuteLabs.io Tree of Life Explorer! Let's show you around...`\n    , onEnter(){\n      // console.log('start')\n    }\n    , params: {\n      // placement: 'top'\n    }\n  }\n  , {\n    target: '[data-v-tour=\"start\"]'\n    , content: `Below is a tree that shows the connections between different species.`\n    , onEnter({ type }){\n      if ( type !== 'next' ){ return }\n      router.replace({ query: { ids: TourTree } })\n    }\n  }\n  , {\n    target: `.tol-leaf[data-ott=\"${txnCats}\"]`\n    , content: 'This is a \"clade node\". It can represent any <a href=\"https://en.wikipedia.org/wiki/Taxonomic_rank\" target=\"_blank\">taxonomic rank</a> (species, family, genus, ...). In this case, it represents the Cat <em>Family</em>.'\n    , onEnter(){\n      PubSub.$emit('tree:pan-to', txnCats)\n    }\n  }\n  , {\n    target: `.tol-leaf[data-ott=\"${txnCats}\"]`\n    , content: 'The node shows the common name (if it has one), followed by the scientific name.'\n    , onEnter(){\n      PubSub.$emit('tree:pan-to', txnCats)\n    }\n  }\n  , {\n    target: `.tol-leaf[data-ott=\"${txnCats}\"]`\n    , content: 'Hovering (or tapping in touchscreens) will show buttons related to this node.'\n    , onEnter(){\n      const el = document.querySelector('.tol-leaf[data-ott=\"ott563159\"]')\n      el.classList.add('tour-hover')\n    }\n  }\n  , {\n    target: `.tol-leaf[data-ott=\"${txnCats}\"] .overlay-btn.descendants-btn`\n    , content: `This button will show the descendants (children) of this clade. There are a bunch for Cats!`\n    , params: {\n      placement: 'left'\n    }\n  }\n  , {\n    target: `.tol-leaf[data-ott=\"${txnCats}\"] .overlay-btn.cut-btn`\n    , content: `You can delete this whole branch of the tree by using this button.`\n    , params: {\n      placement: 'bottom'\n    }\n  }\n  , {\n    target: `.tol-leaf[data-ott=\"${txnCats}\"] .overlay-btn.info-btn`\n    , content: `You can see more information about the taxon with this button.`\n    , params: {\n      placement: 'bottom'\n    }\n  }\n  , {\n    target: `.tol-leaf[data-ott=\"${txnCats}\"] .overlay-btn.remove-btn`\n    , content: `This removes the card.`\n    , params: {\n      placement: 'bottom'\n    }\n    , onLeave(){\n      const el = document.querySelector('.tol-leaf[data-ott=\"ott563159\"]')\n      el.classList.remove('tour-hover')\n    }\n  }\n  , {\n    target: `.svg-ancestor-collapse[data-ott=\"${txnCats}\"]`\n    , content: `This icon shows how many ancestors are between the Cat Family clade and the next node shown up the tree.`\n  }\n  , {\n    target: '.options-dropdown'\n    , content: `Use this button to control how the tree is displayed.`\n  }\n  , {\n    target: '.top-nav .search-box'\n    , content: `This will allow you to find clades and add them to the tree. You can search by their common name, or (if you know it) scientific name.<br/>Go ahead and give it a try by typing in something like \"Blue Whale\" or \"Platypus\"`\n  }\n]\n\nconst TourCallbacks = {\n  onStart(){\n    this.execStepCallbacks( 0, 'start' )\n  }\n  , execStepCallbacks( step, type ){\n    let currentStep = this.currentStep\n\n    if ( currentStep && currentStep.onLeave ){\n      currentStep.onLeave({ type })\n    }\n\n    if ( step < 0 ){ return }\n\n    currentStep = this.currentStep = TourSteps[ step ]\n    let fn = currentStep.onEnter\n    if ( fn ){\n      fn({ type })\n    }\n  }\n  , onPreviousStep( current ){\n    this.execStepCallbacks( current - 1, 'back' )\n  }\n  , onNextStep( current ){\n    this.execStepCallbacks( current + 1, 'next' )\n  }\n  , onStop(){\n    this.execStepCallbacks( -1, 'stop' )\n  }\n}\n\nexport default {\n  name: 'App'\n  , data: () => ({\n    TourSteps\n    , TourCallbacks\n  })\n  , mounted() {\n    PubSub.$on('tree:move', _throttle(() => {\n      let tour = this.$tours['TOLTour']\n      let step = tour.$children[0]\n      if (!step) { return }\n      step.createStep()\n    }, 500))\n\n    PubSub.$on('tour:start', () => {\n      this.$tours['TOLTour'].start()\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/_variables.scss';\nhtml {\n  height: 100%;\n}\nbody {\n  min-height: 100%;\n  background: white;\n}\n\n#app .v-step {\n  $step-color: saturate(lighten($yellow, 30), 20);\n  $text-color: $blue;\n  z-index: 1000;\n  background: $step-color;\n  color: darken($blue, 20);\n  a {\n    color: $text-color;\n    text-decoration: underline;\n  }\n  .v-step__button {\n    color: $text-color;\n    border-color: $text-color;\n\n    &:hover {\n      background-color: $text-color;\n      color: $step-color;\n    }\n  }\n  &[x-placement^=bottom] .v-step__arrow {\n    border-bottom-color: $step-color;\n  }\n  &[x-placement^=top] .v-step__arrow {\n    border-top-color: $step-color;\n  }\n  &[x-placement^=left] .v-step__arrow {\n    border-left-color: $step-color;\n  }\n  &[x-placement^=right] .v-step__arrow {\n    border-right-color: $step-color;\n  }\n}\n\n#app .main-title {\n  position: relative;\n  margin: 0;\n  margin-right: 1rem;\n  font-weight: 700;\n  color: $blue;\n  text-shadow: 1px 1px 1px lighten($blue, 30);\n\n  font: 0/0 a;\n  background: url(~@/assets/logo-horizontal.png) 0 0 no-repeat;\n  background-size: 100%;\n  width: 150px;\n  height: 150px * (45/166);\n\n  @media screen and (min-width: 820px){\n    width: 250px;\n    height: 250px * (45/166);\n  }\n\n  /* padding-left: 2rem; */\n  /* &:before {\n    content: 'The';\n    position: absolute;\n    top: 3px;\n    left: 0;\n    font-size: 1rem;\n  } */\n}\n\n#app .content .main-title {\n  margin-bottom: 1em;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/app.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._t(\"default\"),_vm._v(\" \"),_c('router-view'),_vm._v(\" \"),_c('v-tour',{attrs:{\"name\":\"TOLTour\",\"steps\":_vm.TourSteps,\"callbacks\":_vm.TourCallbacks}})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ee9d958\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/app.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0ee9d958\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./app.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ee9d958\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./app.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.vue\n// module id = null\n// module chunks = ","import _capitalize from 'lodash/capitalize'\nimport _find from 'lodash/find'\nimport _filter from 'lodash/filter'\n\nfunction titleCase( str ){\n  return str.split(' ').map( w => _capitalize(w) ).join(' ')\n}\n\nconst numberRanges = [\n  { range: [1, 1e3], suffix: '', decimals: 0 }\n  , { range: [1e3, 1e6], suffix: 'k', decimals: 1 }\n  , { range: [1e6, 1e9], suffix: 'M', decimals: 1 }\n  , { range: [1e9, Infinity], suffix: 'B', decimals: 1 }\n]\n\nfunction shortNumber( n ){\n  if ( n === 0 ){\n    return '0'\n  }\n\n  let cfg = _find( numberRanges, cfg => (cfg.range[0] && n < cfg.range[1]) )\n  return (n / cfg.range[0]).toFixed( cfg.decimals ) + cfg.suffix\n}\n\nfunction truncate( str = '', len = 30, sfx = '...' ){\n  if ( str.length < len ){ return str }\n  return str.substr( 0, len - sfx.length ) + sfx\n}\n\nexport default {\n  install( Vue, options ){\n    Vue.filter('capitalize', _capitalize)\n    Vue.filter('titleCase', titleCase)\n    Vue.filter('filter', _filter)\n    Vue.filter('shortNumber', shortNumber)\n    Vue.filter('truncate', truncate)\n\n    Vue.filter('nodeName', function( node ){\n      if (node.taxon){\n        return node.taxon.name\n      }\n      if (node.descendant_name_list){\n        return node.descendant_name_list.join(' and ')\n      }\n      return node.node_id\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './app'\nimport router from './router'\nimport Filters from './plugins/filters'\nimport VueMotion from 'vue-motion'\nimport VueTour from 'vue-tour'\nimport VueAwesomeSwiper from 'vue-awesome-swiper'\nimport Buefy from 'buefy'\n\n// require styles\nimport 'swiper/dist/css/swiper.css'\nimport 'vue-tour/dist/vue-tour.css'\nimport './styles/main.scss'\n\nVue.use(Buefy, {\n  defaultContainerElement: '#app .below-nav'\n  // , defaultIconPack: 'fas'\n})\n\nVue.use(Filters)\nVue.use(VueMotion)\nVue.use(VueTour)\nVue.use(VueAwesomeSwiper)\n\nVue.config.productionTip = false\n\nconst MetaInfoComponent = {\n  props: ['show']\n  , template: (function(){\n    let el = document.getElementById('meta-info')\n    let html = el.innerHTML\n    el.parentNode.removeChild(el)\n    return html\n  })()\n  , computed: {\n    showInfo: {\n      get(){\n        return this.show\n      }\n      , set( val ){\n        this.$emit('update:show', val)\n      }\n    }\n  }\n}\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app'\n  , router\n  , data: () => ({\n    showMetaInfo: false\n  })\n  , components: { App, MetaInfoComponent }\n  , template: '<App><MetaInfoComponent :show.sync=\"showMetaInfo\"/></App>'\n  , computed: {\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}